<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Основи роботи з даними в R - 10&nbsp; Manipulate data with dplyr</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./data-cleaning.html" rel="next">
<link href="./28-r-html.html" rel="prev">
<link href="./img/favicon.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="css/style.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Manipulate data with <code>dplyr</code></span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Основи роботи з даними в R</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/kleban/data-r/" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
    <a href="" title="Share" id="sidebar-tool-dropdown-0" class="sidebar-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-share"></i></a>
    <ul class="dropdown-menu" aria-labelledby="sidebar-tool-dropdown-0">
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
            <i class="bi bi-bi-twitter pe-1"></i>
          Twitter
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
            <i class="bi bi-bi-facebook pe-1"></i>
          Facebook
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=|url|">
            <i class="bi bi-bi-linkedin pe-1"></i>
          LinkedIn
          </a>
        </li>
    </ul>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Про посібник</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-intro.html" class="sidebar-item-text sidebar-link">Вступ</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">ТЕМА 1. ВСТУП ДО РОБОТИ З ДАНИМИ</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-r-data-read-intro.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Загальна інформація + презентація</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">ТЕМА 2. ЧИТАННЯ ДАНИХ</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./20-r-data-read-intro.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Загальна інформація + презентація</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./22-r-csv.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">CSV</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./23-r-xlsx.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">MS Excel (xlsx)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./24-r-xml.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">XML</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./25-r-api-json.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">JSON and API</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./26-r-google.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Google Services</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./27-r-sql.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">SQL (with SQLite sample)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./28-r-html.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Web-pages (HTML)</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">ТЕМА 3. ВИБІРКА ТА ТРАНСФОРМАЦІЯ ДАНИХ</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./etl-dplyr.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Manipulate data with <code>dplyr</code></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">ТЕМА 4. СПОСОБИ ОЧИСТКИ ДАНИХ</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data-cleaning.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Підготовка та очистка даних у R</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">Список використаних джерел</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Зміст</h2>
   
  <ul>
  <li><a href="#whats-dplyr-package" id="toc-whats-dplyr-package" class="nav-link active" data-scroll-target="#whats-dplyr-package"><span class="toc-section-number">10.1</span>  What’s <code>dplyr</code> package</a></li>
  <li><a href="#exploring-data-with-dplyr" id="toc-exploring-data-with-dplyr" class="nav-link" data-scroll-target="#exploring-data-with-dplyr"><span class="toc-section-number">10.2</span>  Exploring data with <code>dplyr</code></a>
  <ul class="collapse">
  <li><a href="#basic-funtions-and-dataset-explore" id="toc-basic-funtions-and-dataset-explore" class="nav-link" data-scroll-target="#basic-funtions-and-dataset-explore"><span class="toc-section-number">10.2.1</span>  Basic funtions and dataset explore</a></li>
  <li><a href="#filter-function" id="toc-filter-function" class="nav-link" data-scroll-target="#filter-function"><span class="toc-section-number">10.2.2</span>  <code>filter()</code> function</a></li>
  <li><a href="#pipe-operator" id="toc-pipe-operator" class="nav-link" data-scroll-target="#pipe-operator"><span class="toc-section-number">10.2.3</span>  Pipe (%&gt;%) operator</a></li>
  <li><a href="#select-function" id="toc-select-function" class="nav-link" data-scroll-target="#select-function"><span class="toc-section-number">10.2.4</span>  <code>select()</code> function</a></li>
  <li><a href="#selecting-random-n-rows" id="toc-selecting-random-n-rows" class="nav-link" data-scroll-target="#selecting-random-n-rows"><span class="toc-section-number">10.2.5</span>  Selecting random <span class="math inline">\(N\)</span> rows</a></li>
  <li><a href="#subset-rows-using-their-positions-with-slice" id="toc-subset-rows-using-their-positions-with-slice" class="nav-link" data-scroll-target="#subset-rows-using-their-positions-with-slice"><span class="toc-section-number">10.2.6</span>  Subset rows using their positions with <code>slice()</code></a></li>
  <li><a href="#sorting-with-arrange" id="toc-sorting-with-arrange" class="nav-link" data-scroll-target="#sorting-with-arrange"><span class="toc-section-number">10.2.7</span>  Sorting with <strong><code>arrange()</code></strong></a></li>
  <li><a href="#create-new-variables-with-mutate" id="toc-create-new-variables-with-mutate" class="nav-link" data-scroll-target="#create-new-variables-with-mutate"><span class="toc-section-number">10.2.8</span>  Create new variables with <strong><code>mutate()</code></strong></a></li>
  <li><a href="#renaming-columns-with-rename" id="toc-renaming-columns-with-rename" class="nav-link" data-scroll-target="#renaming-columns-with-rename"><span class="toc-section-number">10.2.9</span>  Renaming columns with <strong><code>rename()</code></strong></a></li>
  <li><a href="#calculations-with-group_by-summarise" id="toc-calculations-with-group_by-summarise" class="nav-link" data-scroll-target="#calculations-with-group_by-summarise"><span class="toc-section-number">10.2.10</span>  Calculations with <strong><code>group_by()</code></strong> + <strong><code>summarise()</code></strong></a></li>
  <li><a href="#task-on-credits" id="toc-task-on-credits" class="nav-link" data-scroll-target="#task-on-credits"><span class="toc-section-number">10.2.11</span>  Task on Credits</a></li>
  <li><a href="#binding-rows-and-columns" id="toc-binding-rows-and-columns" class="nav-link" data-scroll-target="#binding-rows-and-columns"><span class="toc-section-number">10.2.12</span>  Binding rows and columns</a></li>
  <li><a href="#joining-data" id="toc-joining-data" class="nav-link" data-scroll-target="#joining-data"><span class="toc-section-number">10.2.13</span>  <code>Join()</code>ing data</a></li>
  <li><a href="#data-cleaning-with-gather" id="toc-data-cleaning-with-gather" class="nav-link" data-scroll-target="#data-cleaning-with-gather"><span class="toc-section-number">10.2.14</span>  Data cleaning with <code>gather()</code></a></li>
  </ul></li>
  <li><a href="#refences" id="toc-refences" class="nav-link" data-scroll-target="#refences"><span class="toc-section-number">10.3</span>  Refences</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Manipulate data with <code>dplyr</code></span></h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<hr>
<p>You need this packages for code execution:</p>
<div class="cell" data-execution_count="127">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># install.packages("dplyr")</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="co"># install.packages("tidyverse")</span></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="co"># install.packages("gapminder")</span></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="co"># install.packages("magrittr")</span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="co"># install.packages("ISLR")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="128">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="fu">invisible</span>(<span class="fu">Sys.setlocale</span>(<span class="st">"LC_ALL"</span>, <span class="st">"Ukrainian"</span>))</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="fu">invisible</span>(<span class="fu">options</span>(<span class="at">warn=</span><span class="sc">-</span><span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<section id="whats-dplyr-package" class="level2" data-number="10.1">
<h2 data-number="10.1" class="anchored" data-anchor-id="whats-dplyr-package"><span class="header-section-number">10.1</span> What’s <code>dplyr</code> package</h2>
<p>The <code>dplyr</code> package is one of the most powerful and popular package in <code>R</code> for data manipulation.</p>
<p>Working with data:</p>
<ul class="task-list">
<li><input type="checkbox" disabled="" checked="">Figure out what you want to do.</li>
<li><input type="checkbox" disabled="" checked="">Describe those tasks in the form of a computer program.</li>
<li><input type="checkbox" disabled="" checked="">Execute the program.</li>
</ul>
<p>The <code>dplyr</code> package makes these steps fast and easy:</p>
<ul class="task-list">
<li><input type="checkbox" disabled="" checked="">By constraining your options, it helps you think about your data manipulation challenges.</li>
<li><input type="checkbox" disabled="" checked="">It provides simple <code>verbs</code>, functions that correspond to the most common data manipulation tasks, to help you translate your thoughts into code.</li>
<li><input type="checkbox" disabled="" checked="">It uses efficient backends, so you spend less time waiting for the computer.</li>
</ul>
<p>Before use you should install package:</p>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="129">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="co"># install.packages("dplyr")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Next step is loading package:</p>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="130">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>dplyr</code> functions work with pipes and expect <code>tidy data</code>. In tidy data:</p>
<p><img src="../../_static/da-dplyr/dplyr1.png" class="img-fluid"></p>
<p>Alternative way is to load <code>tidyverse</code> package with other attached:</p>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="131">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="co"># install.packages("tidyverse")</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="exploring-data-with-dplyr" class="level2" data-number="10.2">
<h2 data-number="10.2" class="anchored" data-anchor-id="exploring-data-with-dplyr"><span class="header-section-number">10.2</span> Exploring data with <code>dplyr</code></h2>
<section id="basic-funtions-and-dataset-explore" class="level3" data-number="10.2.1">
<h3 data-number="10.2.1" class="anchored" data-anchor-id="basic-funtions-and-dataset-explore"><span class="header-section-number">10.2.1</span> Basic funtions and dataset explore</h3>
<p>There are most popular functions in <code>dplyr</code> is listed in table.</p>
<table class="table">
<thead>
<tr class="header">
<th>dplyr Function</th>
<th>Description</th>
<th>Equivalent SQL</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>select()</td>
<td>Selecting columns (variables)</td>
<td>SELECT</td>
</tr>
<tr class="even">
<td>filter()</td>
<td>Filter (subset) rows.</td>
<td>WHERE</td>
</tr>
<tr class="odd">
<td>group_by()</td>
<td>Group the data</td>
<td>GROUP BY</td>
</tr>
<tr class="even">
<td>summarise()</td>
<td>Summarise (or aggregate) data</td>
<td>-</td>
</tr>
<tr class="odd">
<td>arrange()</td>
<td>Sort the data</td>
<td>ORDER BY</td>
</tr>
<tr class="even">
<td>join()</td>
<td>Joining data frames (tables)</td>
<td>JOIN</td>
</tr>
<tr class="odd">
<td>mutate()</td>
<td>Creating New Variables</td>
<td>COLUMN ALIAS</td>
</tr>
</tbody>
</table>
<p>For the next sample we are going to use <code>gapminder</code> dataset. <a href="00_Datasets.ipynb#gapminder">Go to gapminder dataset description</a></p>
<p>The <code>gapminder</code> data frame include six variables:</p>
<table class="table">
<thead>
<tr class="header">
<th>variable</th>
<th>meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>country</td>
<td>-</td>
</tr>
<tr class="even">
<td>continent</td>
<td>-</td>
</tr>
<tr class="odd">
<td>year</td>
<td>-</td>
</tr>
<tr class="even">
<td>lifeExp</td>
<td>life expectancy at birth</td>
</tr>
<tr class="odd">
<td>pop</td>
<td>total population</td>
</tr>
<tr class="even">
<td>gdpPercap</td>
<td>per-capita GDP</td>
</tr>
</tbody>
</table>
<p><code>Per-capita GDP</code> (Gross domestic product) is given in units of international dollars, <code>a hypothetical unit of currency that has the same purchasing power parity that the U.S. dollar had in the United States at a given point in time</code> – 2005, in this case.</p>
<p>The <code>gapminder</code> data frame is a special kind of data frame: a <code>tibble</code>.</p>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="132">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="co"># install.packages("gapminder")</span></span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="fu">library</span>(gapminder)  <span class="co"># load package and dataset</span></span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="fu">class</span>(gapminder)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class="list-inline"><li>'tbl_df'</li><li>'tbl'</li><li>'data.frame'</li></ol>
</div>
</div>
<p>Let’s preview it with functions <code>str()</code>, <code>glimpse()</code>, <code>head()</code>, <code>tail()</code>, <code>summary()</code>.</p>
<div class="cell" data-scrolled="true" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="133">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="fu">str</span>(gapminder)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [1,704 x 6] (S3: tbl_df/tbl/data.frame)
 $ country  : Factor w/ 142 levels "Afghanistan",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ continent: Factor w/ 5 levels "Africa","Americas",..: 3 3 3 3 3 3 3 3 3 3 ...
 $ year     : int [1:1704] 1952 1957 1962 1967 1972 1977 1982 1987 1992 1997 ...
 $ lifeExp  : num [1:1704] 28.8 30.3 32 34 36.1 ...
 $ pop      : int [1:1704] 8425333 9240934 10267083 11537966 13079460 14880372 12881816 13867957 16317921 22227415 ...
 $ gdpPercap: num [1:1704] 779 821 853 836 740 ...</code></pre>
</div>
</div>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="134">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="fu">glimpse</span>(gapminder)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,704
Columns: 6
$ country   &lt;fct&gt; "Afghanistan", "Afghanistan", "Afghanistan", "Afghanistan", ~
$ continent &lt;fct&gt; Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, Asia, ~
$ year      &lt;int&gt; 1952, 1957, 1962, 1967, 1972, 1977, 1982, 1987, 1992, 1997, ~
$ lifeExp   &lt;dbl&gt; 28.801, 30.332, 31.997, 34.020, 36.088, 38.438, 39.854, 40.8~
$ pop       &lt;int&gt; 8425333, 9240934, 10267083, 11537966, 13079460, 14880372, 12~
$ gdpPercap &lt;dbl&gt; 779.4453, 820.8530, 853.1007, 836.1971, 739.9811, 786.1134, ~</code></pre>
</div>
</div>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="135">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="fu">head</span>(gapminder) <span class="co">#shows first n-rows, 6 by default</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A tibble: 6 × 6</caption>
<thead>
    <tr><th scope="col">country</th><th scope="col">continent</th><th scope="col">year</th><th scope="col">lifeExp</th><th scope="col">pop</th><th scope="col">gdpPercap</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Afghanistan</td><td>Asia</td><td>1952</td><td>28.801</td><td> 8425333</td><td>779.4453</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1957</td><td>30.332</td><td> 9240934</td><td>820.8530</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1962</td><td>31.997</td><td>10267083</td><td>853.1007</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1967</td><td>34.020</td><td>11537966</td><td>836.1971</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1972</td><td>36.088</td><td>13079460</td><td>739.9811</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1977</td><td>38.438</td><td>14880372</td><td>786.1134</td></tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="136">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="fu">tail</span>(gapminder) <span class="co">#shows last n-rows, 6 by default</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A tibble: 6 × 6</caption>
<thead>
    <tr><th scope="col">country</th><th scope="col">continent</th><th scope="col">year</th><th scope="col">lifeExp</th><th scope="col">pop</th><th scope="col">gdpPercap</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Zimbabwe</td><td>Africa</td><td>1982</td><td>60.363</td><td> 7636524</td><td>788.8550</td></tr>
    <tr><td>Zimbabwe</td><td>Africa</td><td>1987</td><td>62.351</td><td> 9216418</td><td>706.1573</td></tr>
    <tr><td>Zimbabwe</td><td>Africa</td><td>1992</td><td>60.377</td><td>10704340</td><td>693.4208</td></tr>
    <tr><td>Zimbabwe</td><td>Africa</td><td>1997</td><td>46.809</td><td>11404948</td><td>792.4500</td></tr>
    <tr><td>Zimbabwe</td><td>Africa</td><td>2002</td><td>39.989</td><td>11926563</td><td>672.0386</td></tr>
    <tr><td>Zimbabwe</td><td>Africa</td><td>2007</td><td>43.487</td><td>12311143</td><td>469.7093</td></tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="137">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="fu">summary</span>(gapminder)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>        country        continent        year         lifeExp     
 Afghanistan:  12   Africa  :624   Min.   :1952   Min.   :23.60  
 Albania    :  12   Americas:300   1st Qu.:1966   1st Qu.:48.20  
 Algeria    :  12   Asia    :396   Median :1980   Median :60.71  
 Angola     :  12   Europe  :360   Mean   :1980   Mean   :59.47  
 Argentina  :  12   Oceania : 24   3rd Qu.:1993   3rd Qu.:70.85  
 Australia  :  12                  Max.   :2007   Max.   :82.60  
 (Other)    :1632                                                
      pop              gdpPercap       
 Min.   :6.001e+04   Min.   :   241.2  
 1st Qu.:2.794e+06   1st Qu.:  1202.1  
 Median :7.024e+06   Median :  3531.8  
 Mean   :2.960e+07   Mean   :  7215.3  
 3rd Qu.:1.959e+07   3rd Qu.:  9325.5  
 Max.   :1.319e+09   Max.   :113523.1  
                                       </code></pre>
</div>
</div>
</section>
<section id="filter-function" class="level3" data-number="10.2.2">
<h3 data-number="10.2.2" class="anchored" data-anchor-id="filter-function"><span class="header-section-number">10.2.2</span> <code>filter()</code> function</h3>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="138">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>austria <span class="ot">&lt;-</span> <span class="fu">filter</span>(gapminder, country <span class="sc">==</span> <span class="st">"Austria"</span>)</span>
<span id="cb15-2"><a href="#cb15-2"></a>austria</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A tibble: 12 × 6</caption>
<thead>
    <tr><th scope="col">country</th><th scope="col">continent</th><th scope="col">year</th><th scope="col">lifeExp</th><th scope="col">pop</th><th scope="col">gdpPercap</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Austria</td><td>Europe</td><td>1952</td><td>66.800</td><td>6927772</td><td> 6137.076</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>1957</td><td>67.480</td><td>6965860</td><td> 8842.598</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>1962</td><td>69.540</td><td>7129864</td><td>10750.721</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>1967</td><td>70.140</td><td>7376998</td><td>12834.602</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>1972</td><td>70.630</td><td>7544201</td><td>16661.626</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>1977</td><td>72.170</td><td>7568430</td><td>19749.422</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>1982</td><td>73.180</td><td>7574613</td><td>21597.084</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>1987</td><td>74.940</td><td>7578903</td><td>23687.826</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>1992</td><td>76.040</td><td>7914969</td><td>27042.019</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>1997</td><td>77.510</td><td>8069876</td><td>29095.921</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>2002</td><td>78.980</td><td>8148312</td><td>32417.608</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>2007</td><td>79.829</td><td>8199783</td><td>36126.493</td></tr>
</tbody>
</table>
</div>
</div>
<p><code>filter()</code> takes logical expressions and returns the rows for which all are TRUE.</p>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="139">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="co"># task: select rows with lifeExp less than 31</span></span>
<span id="cb16-2"><a href="#cb16-2"></a><span class="fu">filter</span>(gapminder, lifeExp <span class="sc">&lt;</span> <span class="dv">31</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A tibble: 6 × 6</caption>
<thead>
    <tr><th scope="col">country</th><th scope="col">continent</th><th scope="col">year</th><th scope="col">lifeExp</th><th scope="col">pop</th><th scope="col">gdpPercap</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Afghanistan </td><td>Asia  </td><td>1952</td><td>28.801</td><td>8425333</td><td> 779.4453</td></tr>
    <tr><td>Afghanistan </td><td>Asia  </td><td>1957</td><td>30.332</td><td>9240934</td><td> 820.8530</td></tr>
    <tr><td>Angola      </td><td>Africa</td><td>1952</td><td>30.015</td><td>4232095</td><td>3520.6103</td></tr>
    <tr><td>Gambia      </td><td>Africa</td><td>1952</td><td>30.000</td><td> 284320</td><td> 485.2307</td></tr>
    <tr><td>Rwanda      </td><td>Africa</td><td>1992</td><td>23.599</td><td>7290203</td><td> 737.0686</td></tr>
    <tr><td>Sierra Leone</td><td>Africa</td><td>1952</td><td>30.331</td><td>2143249</td><td> 879.7877</td></tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="140">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="co"># task: select Austria only and year after 1980</span></span>
<span id="cb17-2"><a href="#cb17-2"></a><span class="fu">filter</span>(gapminder, country <span class="sc">==</span> <span class="st">"Austria"</span>, year <span class="sc">&gt;</span> <span class="dv">1980</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A tibble: 6 × 6</caption>
<thead>
    <tr><th scope="col">country</th><th scope="col">continent</th><th scope="col">year</th><th scope="col">lifeExp</th><th scope="col">pop</th><th scope="col">gdpPercap</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Austria</td><td>Europe</td><td>1982</td><td>73.180</td><td>7574613</td><td>21597.08</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>1987</td><td>74.940</td><td>7578903</td><td>23687.83</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>1992</td><td>76.040</td><td>7914969</td><td>27042.02</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>1997</td><td>77.510</td><td>8069876</td><td>29095.92</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>2002</td><td>78.980</td><td>8148312</td><td>32417.61</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>2007</td><td>79.829</td><td>8199783</td><td>36126.49</td></tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="141">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="co"># task: select Austria and Belgium</span></span>
<span id="cb18-2"><a href="#cb18-2"></a><span class="fu">filter</span>(gapminder, country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Austria"</span>, <span class="st">"Belgium"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A tibble: 24 × 6</caption>
<thead>
    <tr><th scope="col">country</th><th scope="col">continent</th><th scope="col">year</th><th scope="col">lifeExp</th><th scope="col">pop</th><th scope="col">gdpPercap</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Austria</td><td>Europe</td><td>1952</td><td>66.800</td><td> 6927772</td><td> 6137.076</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>1957</td><td>67.480</td><td> 6965860</td><td> 8842.598</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>1962</td><td>69.540</td><td> 7129864</td><td>10750.721</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>1967</td><td>70.140</td><td> 7376998</td><td>12834.602</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>1972</td><td>70.630</td><td> 7544201</td><td>16661.626</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>1977</td><td>72.170</td><td> 7568430</td><td>19749.422</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>1982</td><td>73.180</td><td> 7574613</td><td>21597.084</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>1987</td><td>74.940</td><td> 7578903</td><td>23687.826</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>1992</td><td>76.040</td><td> 7914969</td><td>27042.019</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>1997</td><td>77.510</td><td> 8069876</td><td>29095.921</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>2002</td><td>78.980</td><td> 8148312</td><td>32417.608</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>2007</td><td>79.829</td><td> 8199783</td><td>36126.493</td></tr>
    <tr><td>Belgium</td><td>Europe</td><td>1952</td><td>68.000</td><td> 8730405</td><td> 8343.105</td></tr>
    <tr><td>Belgium</td><td>Europe</td><td>1957</td><td>69.240</td><td> 8989111</td><td> 9714.961</td></tr>
    <tr><td>Belgium</td><td>Europe</td><td>1962</td><td>70.250</td><td> 9218400</td><td>10991.207</td></tr>
    <tr><td>Belgium</td><td>Europe</td><td>1967</td><td>70.940</td><td> 9556500</td><td>13149.041</td></tr>
    <tr><td>Belgium</td><td>Europe</td><td>1972</td><td>71.440</td><td> 9709100</td><td>16672.144</td></tr>
    <tr><td>Belgium</td><td>Europe</td><td>1977</td><td>72.800</td><td> 9821800</td><td>19117.974</td></tr>
    <tr><td>Belgium</td><td>Europe</td><td>1982</td><td>73.930</td><td> 9856303</td><td>20979.846</td></tr>
    <tr><td>Belgium</td><td>Europe</td><td>1987</td><td>75.350</td><td> 9870200</td><td>22525.563</td></tr>
    <tr><td>Belgium</td><td>Europe</td><td>1992</td><td>76.460</td><td>10045622</td><td>25575.571</td></tr>
    <tr><td>Belgium</td><td>Europe</td><td>1997</td><td>77.530</td><td>10199787</td><td>27561.197</td></tr>
    <tr><td>Belgium</td><td>Europe</td><td>2002</td><td>78.320</td><td>10311970</td><td>30485.884</td></tr>
    <tr><td>Belgium</td><td>Europe</td><td>2007</td><td>79.441</td><td>10392226</td><td>33692.605</td></tr>
</tbody>
</table>
</div>
</div>
<p>Lets rewrite initial code and record it to the variable/data.frame:</p>
</section>
<section id="pipe-operator" class="level3" data-number="10.2.3">
<h3 data-number="10.2.3" class="anchored" data-anchor-id="pipe-operator"><span class="header-section-number">10.2.3</span> Pipe (%&gt;%) operator</h3>
<p><code>%&gt;%</code> is <code>pipe</code> operator. The pipe operator takes the thing on the left-hand-side and pipes it into the function call on the right-hand-side – literally, drops it in as the first argument.</p>
<p><code>head()</code> function without pipe and top 4 items:</p>
<blockquote class="blockquote">
<p>In R version before 4.1.0 <code>pipe</code> <code>%&gt;%</code> operator is not a language build-in and you should install <code>magrittr</code> package:</p>
</blockquote>
<blockquote class="blockquote">
<p>Pipe opertor in R 4.1+ <code>|&gt;</code>, using this is preferable</p>
</blockquote>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="142">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="co">#install.packages("magrittr") # for pipe %&gt;% operator</span></span>
<span id="cb19-2"><a href="#cb19-2"></a><span class="fu">library</span>(magrittr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="143">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="fu">head</span>(gapminder, <span class="at">n =</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A tibble: 4 × 6</caption>
<thead>
    <tr><th scope="col">country</th><th scope="col">continent</th><th scope="col">year</th><th scope="col">lifeExp</th><th scope="col">pop</th><th scope="col">gdpPercap</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Afghanistan</td><td>Asia</td><td>1952</td><td>28.801</td><td> 8425333</td><td>779.4453</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1957</td><td>30.332</td><td> 9240934</td><td>820.8530</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1962</td><td>31.997</td><td>10267083</td><td>853.1007</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1967</td><td>34.020</td><td>11537966</td><td>836.1971</td></tr>
</tbody>
</table>
</div>
</div>
<p><code>head()</code> function with pipe and top 4 items:</p>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="144">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>gapminder <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A tibble: 4 × 6</caption>
<thead>
    <tr><th scope="col">country</th><th scope="col">continent</th><th scope="col">year</th><th scope="col">lifeExp</th><th scope="col">pop</th><th scope="col">gdpPercap</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Afghanistan</td><td>Asia</td><td>1952</td><td>28.801</td><td> 8425333</td><td>779.4453</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1957</td><td>30.332</td><td> 9240934</td><td>820.8530</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1962</td><td>31.997</td><td>10267083</td><td>853.1007</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1967</td><td>34.020</td><td>11537966</td><td>836.1971</td></tr>
</tbody>
</table>
</div>
</div>
<p>Output is the same. So, let’s rewrire filtering for <code>Austria</code> with pipe:</p>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="145">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>austria <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Austria"</span>)</span>
<span id="cb22-2"><a href="#cb22-2"></a>austria</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A tibble: 12 × 6</caption>
<thead>
    <tr><th scope="col">country</th><th scope="col">continent</th><th scope="col">year</th><th scope="col">lifeExp</th><th scope="col">pop</th><th scope="col">gdpPercap</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Austria</td><td>Europe</td><td>1952</td><td>66.800</td><td>6927772</td><td> 6137.076</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>1957</td><td>67.480</td><td>6965860</td><td> 8842.598</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>1962</td><td>69.540</td><td>7129864</td><td>10750.721</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>1967</td><td>70.140</td><td>7376998</td><td>12834.602</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>1972</td><td>70.630</td><td>7544201</td><td>16661.626</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>1977</td><td>72.170</td><td>7568430</td><td>19749.422</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>1982</td><td>73.180</td><td>7574613</td><td>21597.084</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>1987</td><td>74.940</td><td>7578903</td><td>23687.826</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>1992</td><td>76.040</td><td>7914969</td><td>27042.019</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>1997</td><td>77.510</td><td>8069876</td><td>29095.921</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>2002</td><td>78.980</td><td>8148312</td><td>32417.608</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>2007</td><td>79.829</td><td>8199783</td><td>36126.493</td></tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="146">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="co"># add more conditions in filter</span></span>
<span id="cb23-2"><a href="#cb23-2"></a>austria <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Austria"</span>, year <span class="sc">&gt;</span> <span class="dv">2000</span>)</span>
<span id="cb23-3"><a href="#cb23-3"></a>austria</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A tibble: 2 × 6</caption>
<thead>
    <tr><th scope="col">country</th><th scope="col">continent</th><th scope="col">year</th><th scope="col">lifeExp</th><th scope="col">pop</th><th scope="col">gdpPercap</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Austria</td><td>Europe</td><td>2002</td><td>78.980</td><td>8148312</td><td>32417.61</td></tr>
    <tr><td>Austria</td><td>Europe</td><td>2007</td><td>79.829</td><td>8199783</td><td>36126.49</td></tr>
</tbody>
</table>
</div>
</div>
<hr>
</section>
<section id="select-function" class="level3" data-number="10.2.4">
<h3 data-number="10.2.4" class="anchored" data-anchor-id="select-function"><span class="header-section-number">10.2.4</span> <code>select()</code> function</h3>
<p>Use <code>select()</code> to subset the data on variables/columns by <code>names</code> or <code>index</code>. You also can define order of columns with <code>select()</code>.</p>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="147">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb24-2"><a href="#cb24-2"></a><span class="fu">select</span>(year, country, pop) <span class="sc">%&gt;%</span></span>
<span id="cb24-3"><a href="#cb24-3"></a><span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A tibble: 10 × 3</caption>
<thead>
    <tr><th scope="col">year</th><th scope="col">country</th><th scope="col">pop</th></tr>
    <tr><th scope="col">&lt;int&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th></tr>
</thead>
<tbody>
    <tr><td>1952</td><td>Afghanistan</td><td> 8425333</td></tr>
    <tr><td>1957</td><td>Afghanistan</td><td> 9240934</td></tr>
    <tr><td>1962</td><td>Afghanistan</td><td>10267083</td></tr>
    <tr><td>1967</td><td>Afghanistan</td><td>11537966</td></tr>
    <tr><td>1972</td><td>Afghanistan</td><td>13079460</td></tr>
    <tr><td>1977</td><td>Afghanistan</td><td>14880372</td></tr>
    <tr><td>1982</td><td>Afghanistan</td><td>12881816</td></tr>
    <tr><td>1987</td><td>Afghanistan</td><td>13867957</td></tr>
    <tr><td>1992</td><td>Afghanistan</td><td>16317921</td></tr>
    <tr><td>1997</td><td>Afghanistan</td><td>22227415</td></tr>
</tbody>
</table>
</div>
</div>
<p>Lets combine few functions with <code>pipe</code> (<code>%&gt;%</code>):</p>
<p>Finally, lest extend our filtering:</p>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="148">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a><span class="co"># compare dplyr syntax with base R call</span></span>
<span id="cb25-2"><a href="#cb25-2"></a>gapminder[gapminder<span class="sc">$</span>country <span class="sc">==</span> <span class="st">"Austria"</span>, <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"pop"</span>, <span class="st">"lifeExp"</span>)]</span>
<span id="cb25-3"><a href="#cb25-3"></a></span>
<span id="cb25-4"><a href="#cb25-4"></a>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb25-5"><a href="#cb25-5"></a><span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Austria"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-6"><a href="#cb25-6"></a><span class="fu">select</span>(year, pop, lifeExp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A tibble: 12 × 3</caption>
<thead>
    <tr><th scope="col">year</th><th scope="col">pop</th><th scope="col">lifeExp</th></tr>
    <tr><th scope="col">&lt;int&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>1952</td><td>6927772</td><td>66.800</td></tr>
    <tr><td>1957</td><td>6965860</td><td>67.480</td></tr>
    <tr><td>1962</td><td>7129864</td><td>69.540</td></tr>
    <tr><td>1967</td><td>7376998</td><td>70.140</td></tr>
    <tr><td>1972</td><td>7544201</td><td>70.630</td></tr>
    <tr><td>1977</td><td>7568430</td><td>72.170</td></tr>
    <tr><td>1982</td><td>7574613</td><td>73.180</td></tr>
    <tr><td>1987</td><td>7578903</td><td>74.940</td></tr>
    <tr><td>1992</td><td>7914969</td><td>76.040</td></tr>
    <tr><td>1997</td><td>8069876</td><td>77.510</td></tr>
    <tr><td>2002</td><td>8148312</td><td>78.980</td></tr>
    <tr><td>2007</td><td>8199783</td><td>79.829</td></tr>
</tbody>
</table>
</div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A tibble: 12 × 3</caption>
<thead>
    <tr><th scope="col">year</th><th scope="col">pop</th><th scope="col">lifeExp</th></tr>
    <tr><th scope="col">&lt;int&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>1952</td><td>6927772</td><td>66.800</td></tr>
    <tr><td>1957</td><td>6965860</td><td>67.480</td></tr>
    <tr><td>1962</td><td>7129864</td><td>69.540</td></tr>
    <tr><td>1967</td><td>7376998</td><td>70.140</td></tr>
    <tr><td>1972</td><td>7544201</td><td>70.630</td></tr>
    <tr><td>1977</td><td>7568430</td><td>72.170</td></tr>
    <tr><td>1982</td><td>7574613</td><td>73.180</td></tr>
    <tr><td>1987</td><td>7578903</td><td>74.940</td></tr>
    <tr><td>1992</td><td>7914969</td><td>76.040</td></tr>
    <tr><td>1997</td><td>8069876</td><td>77.510</td></tr>
    <tr><td>2002</td><td>8148312</td><td>78.980</td></tr>
    <tr><td>2007</td><td>8199783</td><td>79.829</td></tr>
</tbody>
</table>
</div>
</div>
<p>You can remove some columns using <code>minus</code>(operator) and add few filter conditions:</p>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="149">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a>austria <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb26-2"><a href="#cb26-2"></a>                <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">"Austria"</span>, year <span class="sc">&gt;</span> <span class="dv">2000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb26-3"><a href="#cb26-3"></a>                <span class="fu">select</span>(<span class="sc">-</span>continent, <span class="sc">-</span>gdpPercap) <span class="sc">%&gt;%</span></span>
<span id="cb26-4"><a href="#cb26-4"></a>                <span class="fu">head</span>()</span>
<span id="cb26-5"><a href="#cb26-5"></a>austria</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A tibble: 2 × 4</caption>
<thead>
    <tr><th scope="col">country</th><th scope="col">year</th><th scope="col">lifeExp</th><th scope="col">pop</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Austria</td><td>2002</td><td>78.980</td><td>8148312</td></tr>
    <tr><td>Austria</td><td>2007</td><td>79.829</td><td>8199783</td></tr>
</tbody>
</table>
</div>
</div>
<p>You can insert different conditions about columns you need to <code>select</code>.</p>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="150">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a>gapminder <span class="sc">%&gt;%</span></span>
<span id="cb27-2"><a href="#cb27-2"></a>    <span class="fu">select</span>(<span class="sc">!</span><span class="fu">where</span>(is.numeric)) <span class="sc">%&gt;%</span>  <span class="co"># its 1704 records, because of repeating some records</span></span>
<span id="cb27-3"><a href="#cb27-3"></a>    <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A tibble: 5 × 2</caption>
<thead>
    <tr><th scope="col">country</th><th scope="col">continent</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Afghanistan</td><td>Asia</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td></tr>
</tbody>
</table>
</div>
</div>
<p>Let’s output all unique pairs <code>continent -&gt; country</code> with <code>distinct()</code> function:</p>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="151">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a>gapminder <span class="sc">%&gt;%</span></span>
<span id="cb28-2"><a href="#cb28-2"></a>    <span class="fu">select</span>(country) <span class="sc">%&gt;%</span></span>
<span id="cb28-3"><a href="#cb28-3"></a>    <span class="fu">distinct</span>() <span class="co"># its 142 records now</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A tibble: 142 × 1</caption>
<thead>
    <tr><th scope="col">country</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Afghanistan             </td></tr>
    <tr><td>Albania                 </td></tr>
    <tr><td>Algeria                 </td></tr>
    <tr><td>Angola                  </td></tr>
    <tr><td>Argentina               </td></tr>
    <tr><td>Australia               </td></tr>
    <tr><td>Austria                 </td></tr>
    <tr><td>Bahrain                 </td></tr>
    <tr><td>Bangladesh              </td></tr>
    <tr><td>Belgium                 </td></tr>
    <tr><td>Benin                   </td></tr>
    <tr><td>Bolivia                 </td></tr>
    <tr><td>Bosnia and Herzegovina  </td></tr>
    <tr><td>Botswana                </td></tr>
    <tr><td>Brazil                  </td></tr>
    <tr><td>Bulgaria                </td></tr>
    <tr><td>Burkina Faso            </td></tr>
    <tr><td>Burundi                 </td></tr>
    <tr><td>Cambodia                </td></tr>
    <tr><td>Cameroon                </td></tr>
    <tr><td>Canada                  </td></tr>
    <tr><td>Central African Republic</td></tr>
    <tr><td>Chad                    </td></tr>
    <tr><td>Chile                   </td></tr>
    <tr><td>China                   </td></tr>
    <tr><td>Colombia                </td></tr>
    <tr><td>Comoros                 </td></tr>
    <tr><td>Congo, Dem. Rep.        </td></tr>
    <tr><td>Congo, Rep.             </td></tr>
    <tr><td>Costa Rica              </td></tr>
    <tr><td>...</td></tr>
    <tr><td>Sierra Leone       </td></tr>
    <tr><td>Singapore          </td></tr>
    <tr><td>Slovak Republic    </td></tr>
    <tr><td>Slovenia           </td></tr>
    <tr><td>Somalia            </td></tr>
    <tr><td>South Africa       </td></tr>
    <tr><td>Spain              </td></tr>
    <tr><td>Sri Lanka          </td></tr>
    <tr><td>Sudan              </td></tr>
    <tr><td>Swaziland          </td></tr>
    <tr><td>Sweden             </td></tr>
    <tr><td>Switzerland        </td></tr>
    <tr><td>Syria              </td></tr>
    <tr><td>Taiwan             </td></tr>
    <tr><td>Tanzania           </td></tr>
    <tr><td>Thailand           </td></tr>
    <tr><td>Togo               </td></tr>
    <tr><td>Trinidad and Tobago</td></tr>
    <tr><td>Tunisia            </td></tr>
    <tr><td>Turkey             </td></tr>
    <tr><td>Uganda             </td></tr>
    <tr><td>United Kingdom     </td></tr>
    <tr><td>United States      </td></tr>
    <tr><td>Uruguay            </td></tr>
    <tr><td>Venezuela          </td></tr>
    <tr><td>Vietnam            </td></tr>
    <tr><td>West Bank and Gaza </td></tr>
    <tr><td>Yemen, Rep.        </td></tr>
    <tr><td>Zambia             </td></tr>
    <tr><td>Zimbabwe           </td></tr>
</tbody>
</table>
</div>
</div>
<hr>
</section>
<section id="selecting-random-n-rows" class="level3" data-number="10.2.5">
<h3 data-number="10.2.5" class="anchored" data-anchor-id="selecting-random-n-rows"><span class="header-section-number">10.2.5</span> Selecting random <span class="math inline">\(N\)</span> rows</h3>
<p>The <code>sample_n()</code> function selects random rows from a data frame</p>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="152">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a>gapminder <span class="sc">%&gt;%</span> <span class="fu">sample_n</span>(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A tibble: 5 × 6</caption>
<thead>
    <tr><th scope="col">country</th><th scope="col">continent</th><th scope="col">year</th><th scope="col">lifeExp</th><th scope="col">pop</th><th scope="col">gdpPercap</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Norway          </td><td>Europe  </td><td>1972</td><td>74.340</td><td>3933004</td><td>18965.0555</td></tr>
    <tr><td>Liberia         </td><td>Africa  </td><td>1977</td><td>43.764</td><td>1703617</td><td>  640.3224</td></tr>
    <tr><td>Jamaica         </td><td>Americas</td><td>1997</td><td>72.262</td><td>2531311</td><td> 7121.9247</td></tr>
    <tr><td>Jamaica         </td><td>Americas</td><td>1957</td><td>62.610</td><td>1535090</td><td> 4756.5258</td></tr>
    <tr><td>Hong Kong, China</td><td>Asia    </td><td>2002</td><td>81.495</td><td>6762476</td><td>30209.0152</td></tr>
</tbody>
</table>
</div>
</div>
<p>If you want make <code>pseudo-random generation</code> reprodusable use <code>set.seed()</code>. Seed is start point of random generation. Different seeds give different output.</p>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="153">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a><span class="fu">set.seed</span>(<span class="dv">2021</span>) <span class="co"># example, seed = 2021</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The <code>sample_frac()</code> function selects random fraction rows from a data frame. Let’s select <span class="math inline">\(1\%\)</span> of data</p>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="154">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a><span class="fu">set.seed</span>(<span class="dv">2021</span>) <span class="co"># output not changing, uncomment it </span></span>
<span id="cb31-2"><a href="#cb31-2"></a>gapminder <span class="sc">%&gt;%</span> <span class="fu">sample_frac</span>(<span class="fl">0.1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A tibble: 170 × 6</caption>
<thead>
    <tr><th scope="col">country</th><th scope="col">continent</th><th scope="col">year</th><th scope="col">lifeExp</th><th scope="col">pop</th><th scope="col">gdpPercap</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Libya              </td><td>Africa  </td><td>1962</td><td>47.808</td><td> 1441863</td><td> 6757.0308</td></tr>
    <tr><td>Botswana           </td><td>Africa  </td><td>1997</td><td>52.556</td><td> 1536536</td><td> 8647.1423</td></tr>
    <tr><td>Swaziland          </td><td>Africa  </td><td>1957</td><td>43.424</td><td>  326741</td><td> 1244.7084</td></tr>
    <tr><td>Dominican Republic </td><td>Americas</td><td>1997</td><td>69.957</td><td> 7992357</td><td> 3614.1013</td></tr>
    <tr><td>Iraq               </td><td>Asia    </td><td>2002</td><td>57.046</td><td>24001816</td><td> 4390.7173</td></tr>
    <tr><td>Libya              </td><td>Africa  </td><td>1987</td><td>66.234</td><td> 3799845</td><td>11770.5898</td></tr>
    <tr><td>Montenegro         </td><td>Europe  </td><td>1967</td><td>67.178</td><td>  501035</td><td> 5907.8509</td></tr>
    <tr><td>New Zealand        </td><td>Oceania </td><td>1957</td><td>70.260</td><td> 2229407</td><td>12247.3953</td></tr>
    <tr><td>Bulgaria           </td><td>Europe  </td><td>2007</td><td>73.005</td><td> 7322858</td><td>10680.7928</td></tr>
    <tr><td>Malawi             </td><td>Africa  </td><td>1997</td><td>47.495</td><td>10419991</td><td>  692.2758</td></tr>
    <tr><td>Venezuela          </td><td>Americas</td><td>1977</td><td>67.456</td><td>13503563</td><td>13143.9510</td></tr>
    <tr><td>Guinea             </td><td>Africa  </td><td>1997</td><td>51.455</td><td> 8048834</td><td>  869.4498</td></tr>
    <tr><td>Congo, Dem. Rep.   </td><td>Africa  </td><td>1952</td><td>39.143</td><td>14100005</td><td>  780.5423</td></tr>
    <tr><td>Eritrea            </td><td>Africa  </td><td>1962</td><td>40.158</td><td> 1666618</td><td>  380.9958</td></tr>
    <tr><td>Bangladesh         </td><td>Asia    </td><td>1982</td><td>50.009</td><td>93074406</td><td>  676.9819</td></tr>
    <tr><td>Cote d'Ivoire      </td><td>Africa  </td><td>1952</td><td>40.477</td><td> 2977019</td><td> 1388.5947</td></tr>
    <tr><td>Trinidad and Tobago</td><td>Americas</td><td>2002</td><td>68.976</td><td> 1101832</td><td>11460.6002</td></tr>
    <tr><td>Sierra Leone       </td><td>Africa  </td><td>2007</td><td>42.568</td><td> 6144562</td><td>  862.5408</td></tr>
    <tr><td>Malaysia           </td><td>Asia    </td><td>2002</td><td>73.044</td><td>22662365</td><td>10206.9779</td></tr>
    <tr><td>Mali               </td><td>Africa  </td><td>1987</td><td>46.364</td><td> 7634008</td><td>  684.1716</td></tr>
    <tr><td>Pakistan           </td><td>Asia    </td><td>1977</td><td>54.043</td><td>78152686</td><td> 1175.9212</td></tr>
    <tr><td>Norway             </td><td>Europe  </td><td>1982</td><td>75.970</td><td> 4114787</td><td>26298.6353</td></tr>
    <tr><td>Peru               </td><td>Americas</td><td>2007</td><td>71.421</td><td>28674757</td><td> 7408.9056</td></tr>
    <tr><td>Haiti              </td><td>Americas</td><td>1952</td><td>37.579</td><td> 3201488</td><td> 1840.3669</td></tr>
    <tr><td>Cuba               </td><td>Americas</td><td>1962</td><td>65.246</td><td> 7254373</td><td> 5180.7559</td></tr>
    <tr><td>Costa Rica         </td><td>Americas</td><td>2007</td><td>78.782</td><td> 4133884</td><td> 9645.0614</td></tr>
    <tr><td>France             </td><td>Europe  </td><td>1997</td><td>78.640</td><td>58623428</td><td>25889.7849</td></tr>
    <tr><td>Botswana           </td><td>Africa  </td><td>1987</td><td>63.622</td><td> 1151184</td><td> 6205.8839</td></tr>
    <tr><td>Bangladesh         </td><td>Asia    </td><td>1972</td><td>45.252</td><td>70759295</td><td>  630.2336</td></tr>
    <tr><td>Congo, Rep.        </td><td>Africa  </td><td>1977</td><td>55.625</td><td> 1536769</td><td> 3259.1790</td></tr>
    <tr><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td></tr>
    <tr><td>Mozambique </td><td>Africa  </td><td>1972</td><td>40.328</td><td>  9809596</td><td>  724.9178</td></tr>
    <tr><td>Nicaragua  </td><td>Americas</td><td>1972</td><td>55.151</td><td>  2182908</td><td> 4688.5933</td></tr>
    <tr><td>Turkey     </td><td>Europe  </td><td>1972</td><td>57.005</td><td> 37492953</td><td> 3450.6964</td></tr>
    <tr><td>Gabon      </td><td>Africa  </td><td>2002</td><td>56.761</td><td>  1299304</td><td>12521.7139</td></tr>
    <tr><td>Ecuador    </td><td>Americas</td><td>1957</td><td>51.356</td><td>  4058385</td><td> 3780.5467</td></tr>
    <tr><td>Honduras   </td><td>Americas</td><td>1972</td><td>53.884</td><td>  2965146</td><td> 2529.8423</td></tr>
    <tr><td>Paraguay   </td><td>Americas</td><td>1952</td><td>62.649</td><td>  1555876</td><td> 1952.3087</td></tr>
    <tr><td>Guinea     </td><td>Africa  </td><td>2007</td><td>56.007</td><td>  9947814</td><td>  942.6542</td></tr>
    <tr><td>Switzerland</td><td>Europe  </td><td>1977</td><td>75.390</td><td>  6316424</td><td>26982.2905</td></tr>
    <tr><td>Honduras   </td><td>Americas</td><td>1962</td><td>48.041</td><td>  2090162</td><td> 2291.1568</td></tr>
    <tr><td>Thailand   </td><td>Asia    </td><td>1952</td><td>50.848</td><td> 21289402</td><td>  757.7974</td></tr>
    <tr><td>Portugal   </td><td>Europe  </td><td>1957</td><td>61.510</td><td>  8817650</td><td> 3774.5717</td></tr>
    <tr><td>Cuba       </td><td>Americas</td><td>1987</td><td>74.174</td><td> 10239839</td><td> 7532.9248</td></tr>
    <tr><td>Brazil     </td><td>Americas</td><td>1997</td><td>69.388</td><td>168546719</td><td> 7957.9808</td></tr>
    <tr><td>Madagascar </td><td>Africa  </td><td>1962</td><td>40.848</td><td>  5703324</td><td> 1643.3871</td></tr>
    <tr><td>Mauritius  </td><td>Africa  </td><td>1982</td><td>66.711</td><td>   992040</td><td> 3688.0377</td></tr>
    <tr><td>Ghana      </td><td>Africa  </td><td>1982</td><td>53.744</td><td> 11400338</td><td>  876.0326</td></tr>
    <tr><td>Congo, Rep.</td><td>Africa  </td><td>1987</td><td>57.470</td><td>  2064095</td><td> 4201.1949</td></tr>
    <tr><td>Haiti      </td><td>Americas</td><td>1977</td><td>49.923</td><td>  4908554</td><td> 1874.2989</td></tr>
    <tr><td>Portugal   </td><td>Europe  </td><td>1952</td><td>59.820</td><td>  8526050</td><td> 3068.3199</td></tr>
    <tr><td>Angola     </td><td>Africa  </td><td>1982</td><td>39.942</td><td>  7016384</td><td> 2756.9537</td></tr>
    <tr><td>Swaziland  </td><td>Africa  </td><td>1997</td><td>54.289</td><td>  1054486</td><td> 3876.7685</td></tr>
    <tr><td>Norway     </td><td>Europe  </td><td>1992</td><td>77.320</td><td>  4286357</td><td>33965.6611</td></tr>
    <tr><td>Austria    </td><td>Europe  </td><td>1972</td><td>70.630</td><td>  7544201</td><td>16661.6256</td></tr>
    <tr><td>Croatia    </td><td>Europe  </td><td>1957</td><td>64.770</td><td>  3991242</td><td> 4338.2316</td></tr>
    <tr><td>New Zealand</td><td>Oceania </td><td>1952</td><td>69.390</td><td>  1994794</td><td>10556.5757</td></tr>
    <tr><td>Angola     </td><td>Africa  </td><td>2007</td><td>42.731</td><td> 12420476</td><td> 4797.2313</td></tr>
    <tr><td>Sudan      </td><td>Africa  </td><td>2007</td><td>58.556</td><td> 42292929</td><td> 2602.3950</td></tr>
    <tr><td>Poland     </td><td>Europe  </td><td>1962</td><td>67.640</td><td> 30329617</td><td> 5338.7521</td></tr>
    <tr><td>Japan      </td><td>Asia    </td><td>1972</td><td>73.420</td><td>107188273</td><td>14778.7864</td></tr>
</tbody>
</table>
</div>
</div>
<hr>
</section>
<section id="subset-rows-using-their-positions-with-slice" class="level3" data-number="10.2.6">
<h3 data-number="10.2.6" class="anchored" data-anchor-id="subset-rows-using-their-positions-with-slice"><span class="header-section-number">10.2.6</span> Subset rows using their positions with <code>slice()</code></h3>
<p><strong>Description</strong></p>
<ul class="task-list">
<li><input type="checkbox" disabled="" checked=""><code>slice()</code> lets you index rows by their (integer) locations. It allows you to select, remove, and duplicate rows. It is accompanied by a number of helpers for common use cases:</li>
<li><input type="checkbox" disabled="" checked=""><code>slice_head()</code> and <code>slice_tail()</code> select the first or last rows.</li>
<li><input type="checkbox" disabled="" checked=""><code>slice_sample()</code> randomly selects rows.</li>
<li><input type="checkbox" disabled="" checked=""><code>slice_min()</code> and <code>slice_max()</code> select rows with highest or lowest values of a variable.</li>
</ul>
<p>If <code>.data</code> is a grouped_df, the operation will be performed on each group, so that (e.g.) <code>slice_head(df, n = 5)</code> will select the first five rows in each group.</p>
<p><strong>Samples</strong></p>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="155">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a>gapminder <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span>) <span class="co"># top 1 row</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A tibble: 1 × 6</caption>
<thead>
    <tr><th scope="col">country</th><th scope="col">continent</th><th scope="col">year</th><th scope="col">lifeExp</th><th scope="col">pop</th><th scope="col">gdpPercap</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Afghanistan</td><td>Asia</td><td>1952</td><td>28.801</td><td>8425333</td><td>779.4453</td></tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="156">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a>gapminder <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>) <span class="co"># top n = 6</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A tibble: 6 × 6</caption>
<thead>
    <tr><th scope="col">country</th><th scope="col">continent</th><th scope="col">year</th><th scope="col">lifeExp</th><th scope="col">pop</th><th scope="col">gdpPercap</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Afghanistan</td><td>Asia</td><td>1952</td><td>28.801</td><td> 8425333</td><td>779.4453</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1957</td><td>30.332</td><td> 9240934</td><td>820.8530</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1962</td><td>31.997</td><td>10267083</td><td>853.1007</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1967</td><td>34.020</td><td>11537966</td><td>836.1971</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1972</td><td>36.088</td><td>13079460</td><td>739.9811</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1977</td><td>38.438</td><td>14880372</td><td>786.1134</td></tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="157">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a>gapminder <span class="sc">%&gt;%</span> <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">6</span>) <span class="co"># works like head()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A tibble: 6 × 6</caption>
<thead>
    <tr><th scope="col">country</th><th scope="col">continent</th><th scope="col">year</th><th scope="col">lifeExp</th><th scope="col">pop</th><th scope="col">gdpPercap</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Afghanistan</td><td>Asia</td><td>1952</td><td>28.801</td><td> 8425333</td><td>779.4453</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1957</td><td>30.332</td><td> 9240934</td><td>820.8530</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1962</td><td>31.997</td><td>10267083</td><td>853.1007</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1967</td><td>34.020</td><td>11537966</td><td>836.1971</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1972</td><td>36.088</td><td>13079460</td><td>739.9811</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1977</td><td>38.438</td><td>14880372</td><td>786.1134</td></tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="158">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a>gapminder <span class="sc">%&gt;%</span> <span class="fu">slice_tail</span>(<span class="at">n =</span> <span class="dv">5</span>) <span class="co"># works like tail()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A tibble: 5 × 6</caption>
<thead>
    <tr><th scope="col">country</th><th scope="col">continent</th><th scope="col">year</th><th scope="col">lifeExp</th><th scope="col">pop</th><th scope="col">gdpPercap</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Zimbabwe</td><td>Africa</td><td>1987</td><td>62.351</td><td> 9216418</td><td>706.1573</td></tr>
    <tr><td>Zimbabwe</td><td>Africa</td><td>1992</td><td>60.377</td><td>10704340</td><td>693.4208</td></tr>
    <tr><td>Zimbabwe</td><td>Africa</td><td>1997</td><td>46.809</td><td>11404948</td><td>792.4500</td></tr>
    <tr><td>Zimbabwe</td><td>Africa</td><td>2002</td><td>39.989</td><td>11926563</td><td>672.0386</td></tr>
    <tr><td>Zimbabwe</td><td>Africa</td><td>2007</td><td>43.487</td><td>12311143</td><td>469.7093</td></tr>
</tbody>
</table>
</div>
</div>
<p><strong>You can drop some recods with negative indexes:</strong></p>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="159">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a>gapminder <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,<span class="dv">5</span>)) <span class="sc">%&gt;%</span> <span class="co"># remove Afganistan years 1952, 1957, 1962 and 1972 </span></span>
<span id="cb36-2"><a href="#cb36-2"></a>    <span class="fu">head</span>(<span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A tibble: 6 × 6</caption>
<thead>
    <tr><th scope="col">country</th><th scope="col">continent</th><th scope="col">year</th><th scope="col">lifeExp</th><th scope="col">pop</th><th scope="col">gdpPercap</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Afghanistan</td><td>Asia</td><td>1967</td><td>34.020</td><td>11537966</td><td>836.1971</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1977</td><td>38.438</td><td>14880372</td><td>786.1134</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1982</td><td>39.854</td><td>12881816</td><td>978.0114</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1987</td><td>40.822</td><td>13867957</td><td>852.3959</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1992</td><td>41.674</td><td>16317921</td><td>649.3414</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1997</td><td>41.763</td><td>22227415</td><td>635.3414</td></tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="160">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a><span class="co"># Random rows selection with slice_sample()</span></span>
<span id="cb37-2"><a href="#cb37-2"></a>gapminder <span class="sc">%&gt;%</span> <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">5</span>) <span class="co">#use set.seed() to fix random</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A tibble: 5 × 6</caption>
<thead>
    <tr><th scope="col">country</th><th scope="col">continent</th><th scope="col">year</th><th scope="col">lifeExp</th><th scope="col">pop</th><th scope="col">gdpPercap</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Cambodia        </td><td>Asia  </td><td>2002</td><td>56.752</td><td>12926707</td><td>  896.2260</td></tr>
    <tr><td>Poland          </td><td>Europe</td><td>2002</td><td>74.670</td><td>38625976</td><td>12002.2391</td></tr>
    <tr><td>Bulgaria        </td><td>Europe</td><td>1972</td><td>70.900</td><td> 8576200</td><td> 6597.4944</td></tr>
    <tr><td>Congo, Dem. Rep.</td><td>Africa</td><td>1952</td><td>39.143</td><td>14100005</td><td>  780.5423</td></tr>
    <tr><td>Chad            </td><td>Africa</td><td>2002</td><td>50.525</td><td> 8835739</td><td> 1156.1819</td></tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="161">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a><span class="co"># Rows with minimum and maximum values of a variable</span></span>
<span id="cb38-2"><a href="#cb38-2"></a><span class="co"># Lets find top 5 records with minimum and maximum lifeExp in all dataset</span></span>
<span id="cb38-3"><a href="#cb38-3"></a>gapminder <span class="sc">%&gt;%</span> <span class="fu">slice_min</span>(lifeExp, <span class="at">n =</span> <span class="dv">5</span>)</span>
<span id="cb38-4"><a href="#cb38-4"></a>gapminder <span class="sc">%&gt;%</span> <span class="fu">slice_max</span>(lifeExp, <span class="at">n =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A tibble: 5 × 6</caption>
<thead>
    <tr><th scope="col">country</th><th scope="col">continent</th><th scope="col">year</th><th scope="col">lifeExp</th><th scope="col">pop</th><th scope="col">gdpPercap</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Rwanda      </td><td>Africa</td><td>1992</td><td>23.599</td><td>7290203</td><td> 737.0686</td></tr>
    <tr><td>Afghanistan </td><td>Asia  </td><td>1952</td><td>28.801</td><td>8425333</td><td> 779.4453</td></tr>
    <tr><td>Gambia      </td><td>Africa</td><td>1952</td><td>30.000</td><td> 284320</td><td> 485.2307</td></tr>
    <tr><td>Angola      </td><td>Africa</td><td>1952</td><td>30.015</td><td>4232095</td><td>3520.6103</td></tr>
    <tr><td>Sierra Leone</td><td>Africa</td><td>1952</td><td>30.331</td><td>2143249</td><td> 879.7877</td></tr>
</tbody>
</table>
</div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A tibble: 5 × 6</caption>
<thead>
    <tr><th scope="col">country</th><th scope="col">continent</th><th scope="col">year</th><th scope="col">lifeExp</th><th scope="col">pop</th><th scope="col">gdpPercap</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Japan           </td><td>Asia  </td><td>2007</td><td>82.603</td><td>127467972</td><td>31656.07</td></tr>
    <tr><td>Hong Kong, China</td><td>Asia  </td><td>2007</td><td>82.208</td><td>  6980412</td><td>39724.98</td></tr>
    <tr><td>Japan           </td><td>Asia  </td><td>2002</td><td>82.000</td><td>127065841</td><td>28604.59</td></tr>
    <tr><td>Iceland         </td><td>Europe</td><td>2007</td><td>81.757</td><td>   301931</td><td>36180.79</td></tr>
    <tr><td>Switzerland     </td><td>Europe</td><td>2007</td><td>81.701</td><td>  7554661</td><td>37506.42</td></tr>
</tbody>
</table>
</div>
</div>
<hr>
</section>
<section id="sorting-with-arrange" class="level3" data-number="10.2.7">
<h3 data-number="10.2.7" class="anchored" data-anchor-id="sorting-with-arrange"><span class="header-section-number">10.2.7</span> Sorting with <strong><code>arrange()</code></strong></h3>
<p><code>arrange(.data, …)</code> function order rows by values of a column or columns (low to high)You can use with <code>desc()</code> to order from high to low.</p>
<p>For example, we need to select top 10 countries in 2002 by lifeExp variable.</p>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="162">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1"></a>data2002 <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb39-2"><a href="#cb39-2"></a>                <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2002</span>) <span class="sc">%&gt;%</span></span>
<span id="cb39-3"><a href="#cb39-3"></a>                <span class="fu">top_n</span>(<span class="dv">10</span>, lifeExp) <span class="co"># select top 10 by lifeExp value</span></span>
<span id="cb39-4"><a href="#cb39-4"></a>data2002</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A tibble: 10 × 6</caption>
<thead>
    <tr><th scope="col">country</th><th scope="col">continent</th><th scope="col">year</th><th scope="col">lifeExp</th><th scope="col">pop</th><th scope="col">gdpPercap</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Australia       </td><td>Oceania </td><td>2002</td><td>80.370</td><td> 19546792</td><td>30687.75</td></tr>
    <tr><td>Canada          </td><td>Americas</td><td>2002</td><td>79.770</td><td> 31902268</td><td>33328.97</td></tr>
    <tr><td>Hong Kong, China</td><td>Asia    </td><td>2002</td><td>81.495</td><td>  6762476</td><td>30209.02</td></tr>
    <tr><td>Iceland         </td><td>Europe  </td><td>2002</td><td>80.500</td><td>   288030</td><td>31163.20</td></tr>
    <tr><td>Israel          </td><td>Asia    </td><td>2002</td><td>79.696</td><td>  6029529</td><td>21905.60</td></tr>
    <tr><td>Italy           </td><td>Europe  </td><td>2002</td><td>80.240</td><td> 57926999</td><td>27968.10</td></tr>
    <tr><td>Japan           </td><td>Asia    </td><td>2002</td><td>82.000</td><td>127065841</td><td>28604.59</td></tr>
    <tr><td>Spain           </td><td>Europe  </td><td>2002</td><td>79.780</td><td> 40152517</td><td>24835.47</td></tr>
    <tr><td>Sweden          </td><td>Europe  </td><td>2002</td><td>80.040</td><td>  8954175</td><td>29341.63</td></tr>
    <tr><td>Switzerland     </td><td>Europe  </td><td>2002</td><td>80.620</td><td>  7361757</td><td>34480.96</td></tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="163">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1"></a><span class="co"># sort by pop</span></span>
<span id="cb40-2"><a href="#cb40-2"></a>t <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(continent)</span>
<span id="cb40-3"><a href="#cb40-3"></a>t <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(continent,  country)</span>
<span id="cb40-4"><a href="#cb40-4"></a>t <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(continent, <span class="fu">desc</span>( country))</span>
<span id="cb40-5"><a href="#cb40-5"></a><span class="fu">head</span>(t)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A tibble: 6 × 6</caption>
<thead>
    <tr><th scope="col">country</th><th scope="col">continent</th><th scope="col">year</th><th scope="col">lifeExp</th><th scope="col">pop</th><th scope="col">gdpPercap</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Zimbabwe</td><td>Africa</td><td>1952</td><td>48.451</td><td>3080907</td><td>406.8841</td></tr>
    <tr><td>Zimbabwe</td><td>Africa</td><td>1957</td><td>50.469</td><td>3646340</td><td>518.7643</td></tr>
    <tr><td>Zimbabwe</td><td>Africa</td><td>1962</td><td>52.358</td><td>4277736</td><td>527.2722</td></tr>
    <tr><td>Zimbabwe</td><td>Africa</td><td>1967</td><td>53.995</td><td>4995432</td><td>569.7951</td></tr>
    <tr><td>Zimbabwe</td><td>Africa</td><td>1972</td><td>55.635</td><td>5861135</td><td>799.3622</td></tr>
    <tr><td>Zimbabwe</td><td>Africa</td><td>1977</td><td>57.674</td><td>6642107</td><td>685.5877</td></tr>
</tbody>
</table>
</div>
</div>
<hr>
</section>
<section id="create-new-variables-with-mutate" class="level3" data-number="10.2.8">
<h3 data-number="10.2.8" class="anchored" data-anchor-id="create-new-variables-with-mutate"><span class="header-section-number">10.2.8</span> Create new variables with <strong><code>mutate()</code></strong></h3>
<p><code>mutate(.data, …)</code> compute new column(s). Lets compute new column for <code>data2002</code> <span class="math inline">\(gdpTotal = gdpPercap * pop / 1000000\)</span>.</p>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="164">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1"></a>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb41-2"><a href="#cb41-2"></a>    <span class="fu">mutate</span>(<span class="at">gdpTotal =</span> gdpPercap <span class="sc">*</span> pop) <span class="sc">%&gt;%</span></span>
<span id="cb41-3"><a href="#cb41-3"></a>    <span class="fu">head</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A tibble: 10 × 7</caption>
<thead>
    <tr><th scope="col">country</th><th scope="col">continent</th><th scope="col">year</th><th scope="col">lifeExp</th><th scope="col">pop</th><th scope="col">gdpPercap</th><th scope="col">gdpTotal</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Afghanistan</td><td>Asia</td><td>1952</td><td>28.801</td><td> 8425333</td><td>779.4453</td><td> 6567086330</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1957</td><td>30.332</td><td> 9240934</td><td>820.8530</td><td> 7585448670</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1962</td><td>31.997</td><td>10267083</td><td>853.1007</td><td> 8758855797</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1967</td><td>34.020</td><td>11537966</td><td>836.1971</td><td> 9648014150</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1972</td><td>36.088</td><td>13079460</td><td>739.9811</td><td> 9678553274</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1977</td><td>38.438</td><td>14880372</td><td>786.1134</td><td>11697659231</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1982</td><td>39.854</td><td>12881816</td><td>978.0114</td><td>12598563401</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1987</td><td>40.822</td><td>13867957</td><td>852.3959</td><td>11820990309</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1992</td><td>41.674</td><td>16317921</td><td>649.3414</td><td>10595901589</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1997</td><td>41.763</td><td>22227415</td><td>635.3414</td><td>14121995875</td></tr>
</tbody>
</table>
</div>
</div>
<p><code>transmute(.data, …)</code> compute new column(s), drop others.</p>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="165">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1"></a>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb42-2"><a href="#cb42-2"></a>    <span class="fu">transmute</span>(<span class="at">gdpTotal =</span> gdpPercap <span class="sc">*</span> pop) <span class="sc">%&gt;%</span></span>
<span id="cb42-3"><a href="#cb42-3"></a>    <span class="fu">head</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A tibble: 10 × 1</caption>
<thead>
    <tr><th scope="col">gdpTotal</th></tr>
    <tr><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td> 6567086330</td></tr>
    <tr><td> 7585448670</td></tr>
    <tr><td> 8758855797</td></tr>
    <tr><td> 9648014150</td></tr>
    <tr><td> 9678553274</td></tr>
    <tr><td>11697659231</td></tr>
    <tr><td>12598563401</td></tr>
    <tr><td>11820990309</td></tr>
    <tr><td>10595901589</td></tr>
    <tr><td>14121995875</td></tr>
</tbody>
</table>
</div>
</div>
<p>You can <code>mutate</code> many columns at once:</p>
<div class="cell" data-scrolled="true" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="166">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1"></a>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb43-2"><a href="#cb43-2"></a>    <span class="fu">mutate</span>(<span class="at">gdpTotal =</span> gdpPercap <span class="sc">*</span> pop,</span>
<span id="cb43-3"><a href="#cb43-3"></a>           <span class="at">countryUpper =</span> <span class="fu">toupper</span>(country), <span class="co"># uppercase country</span></span>
<span id="cb43-4"><a href="#cb43-4"></a>           <span class="at">lifeExpRounded =</span> <span class="fu">round</span>(lifeExp)) <span class="sc">%&gt;%</span></span>
<span id="cb43-5"><a href="#cb43-5"></a>    <span class="fu">head</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A tibble: 10 × 9</caption>
<thead>
    <tr><th scope="col">country</th><th scope="col">continent</th><th scope="col">year</th><th scope="col">lifeExp</th><th scope="col">pop</th><th scope="col">gdpPercap</th><th scope="col">gdpTotal</th><th scope="col">countryUpper</th><th scope="col">lifeExpRounded</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Afghanistan</td><td>Asia</td><td>1952</td><td>28.801</td><td> 8425333</td><td>779.4453</td><td> 6567086330</td><td>AFGHANISTAN</td><td>29</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1957</td><td>30.332</td><td> 9240934</td><td>820.8530</td><td> 7585448670</td><td>AFGHANISTAN</td><td>30</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1962</td><td>31.997</td><td>10267083</td><td>853.1007</td><td> 8758855797</td><td>AFGHANISTAN</td><td>32</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1967</td><td>34.020</td><td>11537966</td><td>836.1971</td><td> 9648014150</td><td>AFGHANISTAN</td><td>34</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1972</td><td>36.088</td><td>13079460</td><td>739.9811</td><td> 9678553274</td><td>AFGHANISTAN</td><td>36</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1977</td><td>38.438</td><td>14880372</td><td>786.1134</td><td>11697659231</td><td>AFGHANISTAN</td><td>38</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1982</td><td>39.854</td><td>12881816</td><td>978.0114</td><td>12598563401</td><td>AFGHANISTAN</td><td>40</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1987</td><td>40.822</td><td>13867957</td><td>852.3959</td><td>11820990309</td><td>AFGHANISTAN</td><td>41</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1992</td><td>41.674</td><td>16317921</td><td>649.3414</td><td>10595901589</td><td>AFGHANISTAN</td><td>42</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1997</td><td>41.763</td><td>22227415</td><td>635.3414</td><td>14121995875</td><td>AFGHANISTAN</td><td>42</td></tr>
</tbody>
</table>
</div>
</div>
<p>You also can edit existing column (let’s change <code>continent Europe</code> to <code>EU</code> in dataframe):</p>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="167">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1"></a>data2002 <span class="sc">%&gt;%</span></span>
<span id="cb44-2"><a href="#cb44-2"></a>    <span class="fu">mutate</span>(<span class="at">continent =</span> <span class="fu">as.character</span>(continent), <span class="co"># convert factor -&gt; character </span></span>
<span id="cb44-3"><a href="#cb44-3"></a>           <span class="at">continent =</span> <span class="fu">ifelse</span>(continent <span class="sc">==</span> <span class="st">"Europe"</span>, <span class="st">"EU"</span>, continent))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A tibble: 10 × 6</caption>
<thead>
    <tr><th scope="col">country</th><th scope="col">continent</th><th scope="col">year</th><th scope="col">lifeExp</th><th scope="col">pop</th><th scope="col">gdpPercap</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Australia       </td><td>Oceania </td><td>2002</td><td>80.370</td><td> 19546792</td><td>30687.75</td></tr>
    <tr><td>Canada          </td><td>Americas</td><td>2002</td><td>79.770</td><td> 31902268</td><td>33328.97</td></tr>
    <tr><td>Hong Kong, China</td><td>Asia    </td><td>2002</td><td>81.495</td><td>  6762476</td><td>30209.02</td></tr>
    <tr><td>Iceland         </td><td>EU      </td><td>2002</td><td>80.500</td><td>   288030</td><td>31163.20</td></tr>
    <tr><td>Israel          </td><td>Asia    </td><td>2002</td><td>79.696</td><td>  6029529</td><td>21905.60</td></tr>
    <tr><td>Italy           </td><td>EU      </td><td>2002</td><td>80.240</td><td> 57926999</td><td>27968.10</td></tr>
    <tr><td>Japan           </td><td>Asia    </td><td>2002</td><td>82.000</td><td>127065841</td><td>28604.59</td></tr>
    <tr><td>Spain           </td><td>EU      </td><td>2002</td><td>79.780</td><td> 40152517</td><td>24835.47</td></tr>
    <tr><td>Sweden          </td><td>EU      </td><td>2002</td><td>80.040</td><td>  8954175</td><td>29341.63</td></tr>
    <tr><td>Switzerland     </td><td>EU      </td><td>2002</td><td>80.620</td><td>  7361757</td><td>34480.96</td></tr>
</tbody>
</table>
</div>
</div>
<hr>
</section>
<section id="renaming-columns-with-rename" class="level3" data-number="10.2.9">
<h3 data-number="10.2.9" class="anchored" data-anchor-id="renaming-columns-with-rename"><span class="header-section-number">10.2.9</span> Renaming columns with <strong><code>rename()</code></strong></h3>
<p><code>rename(.data, …)</code> rename columns. Let’s rename column <code>pop</code> to poulation:</p>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="168">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1"></a>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb45-2"><a href="#cb45-2"></a>    <span class="fu">rename</span>(<span class="at">population =</span> pop) <span class="sc">%&gt;%</span></span>
<span id="cb45-3"><a href="#cb45-3"></a>    <span class="fu">head</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A tibble: 10 × 6</caption>
<thead>
    <tr><th scope="col">country</th><th scope="col">continent</th><th scope="col">year</th><th scope="col">lifeExp</th><th scope="col">population</th><th scope="col">gdpPercap</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Afghanistan</td><td>Asia</td><td>1952</td><td>28.801</td><td> 8425333</td><td>779.4453</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1957</td><td>30.332</td><td> 9240934</td><td>820.8530</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1962</td><td>31.997</td><td>10267083</td><td>853.1007</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1967</td><td>34.020</td><td>11537966</td><td>836.1971</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1972</td><td>36.088</td><td>13079460</td><td>739.9811</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1977</td><td>38.438</td><td>14880372</td><td>786.1134</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1982</td><td>39.854</td><td>12881816</td><td>978.0114</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1987</td><td>40.822</td><td>13867957</td><td>852.3959</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1992</td><td>41.674</td><td>16317921</td><td>649.3414</td></tr>
    <tr><td>Afghanistan</td><td>Asia</td><td>1997</td><td>41.763</td><td>22227415</td><td>635.3414</td></tr>
</tbody>
</table>
</div>
</div>
<hr>
</section>
<section id="calculations-with-group_by-summarise" class="level3" data-number="10.2.10">
<h3 data-number="10.2.10" class="anchored" data-anchor-id="calculations-with-group_by-summarise"><span class="header-section-number">10.2.10</span> Calculations with <strong><code>group_by()</code></strong> + <strong><code>summarise()</code></strong></h3>
<p><code>group_by(.data, ..., add = FALSE)</code> returns copy of table grouped by defined columns.</p>
<p>Let’s find average by <code>lifeExp</code> for each <code>continent</code> in <code>2002</code> (ouput is <code>continent</code>, <code>lifeExpAvg2002</code>, <code>countriesCount</code>, <code>year = 2002</code>):</p>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="169">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1"></a>gapminder <span class="sc">%&gt;%</span></span>
<span id="cb46-2"><a href="#cb46-2"></a>    <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2002</span>) <span class="sc">%&gt;%</span> <span class="co"># year</span></span>
<span id="cb46-3"><a href="#cb46-3"></a>    <span class="fu">group_by</span>(continent, year) <span class="sc">%&gt;%</span> <span class="co"># grouping condition</span></span>
<span id="cb46-4"><a href="#cb46-4"></a>    <span class="fu">summarise</span>(</span>
<span id="cb46-5"><a href="#cb46-5"></a>        <span class="at">lifeExpAvg2002 =</span> <span class="fu">mean</span>(lifeExp),</span>
<span id="cb46-6"><a href="#cb46-6"></a>        <span class="at">countriesCount =</span> <span class="fu">n</span>() <span class="co"># n() count of rows in group  </span></span>
<span id="cb46-7"><a href="#cb46-7"></a>        ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'continent'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A grouped_df: 5 × 4</caption>
<thead>
    <tr><th scope="col">continent</th><th scope="col">year</th><th scope="col">lifeExpAvg2002</th><th scope="col">countriesCount</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Africa  </td><td>2002</td><td>53.32523</td><td>52</td></tr>
    <tr><td>Americas</td><td>2002</td><td>72.42204</td><td>25</td></tr>
    <tr><td>Asia    </td><td>2002</td><td>69.23388</td><td>33</td></tr>
    <tr><td>Europe  </td><td>2002</td><td>76.70060</td><td>30</td></tr>
    <tr><td>Oceania </td><td>2002</td><td>79.74000</td><td> 2</td></tr>
</tbody>
</table>
</div>
</div>
<p>Let’s find total <code>population</code> for each <code>continent</code> in <code>2002</code> (ouput is <code>continent</code>, <code>totalPop</code>, <code>year</code>):</p>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="170">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1"></a>gapminder <span class="sc">%&gt;%</span></span>
<span id="cb48-2"><a href="#cb48-2"></a>    <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2002</span>) <span class="sc">%&gt;%</span> <span class="co"># year</span></span>
<span id="cb48-3"><a href="#cb48-3"></a>    <span class="fu">group_by</span>(continent, year) <span class="sc">%&gt;%</span> <span class="co"># grouping condition</span></span>
<span id="cb48-4"><a href="#cb48-4"></a>    <span class="fu">summarise</span>(<span class="at">totalPop =</span> <span class="fu">sum</span>(pop), <span class="at">.groups =</span> <span class="st">"keep"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A grouped_df: 5 × 3</caption>
<thead>
    <tr><th scope="col">continent</th><th scope="col">year</th><th scope="col">totalPop</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Africa  </td><td>2002</td><td> 833723916</td></tr>
    <tr><td>Americas</td><td>2002</td><td> 849772762</td></tr>
    <tr><td>Asia    </td><td>2002</td><td>3601802203</td></tr>
    <tr><td>Europe  </td><td>2002</td><td> 578223869</td></tr>
    <tr><td>Oceania </td><td>2002</td><td>  23454829</td></tr>
</tbody>
</table>
</div>
</div>
<p>There are additional variations of <code>summarise()</code>:</p>
<ul class="task-list">
<li><input type="checkbox" disabled="" checked=""><code>summarise_all()</code> - Apply funs to every column.</li>
<li><input type="checkbox" disabled="" checked=""><code>summarise_at()</code> - Apply funs to specific columns.<br>
</li>
<li><input type="checkbox" disabled="" checked=""><code>summarise_if()</code> - Apply funs to all cols of one type.</li>
</ul>
<hr>
</section>
<section id="task-on-credits" class="level3" data-number="10.2.11">
<h3 data-number="10.2.11" class="anchored" data-anchor-id="task-on-credits"><span class="header-section-number">10.2.11</span> Task on Credits</h3>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="171">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1"></a><span class="fu">library</span>(ISLR)</span>
<span id="cb49-2"><a href="#cb49-2"></a></span>
<span id="cb49-3"><a href="#cb49-3"></a>group_inc <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(Income <span class="sc">~</span> Age <span class="sc">+</span> Gender, <span class="at">data =</span> Credit, mean)</span>
<span id="cb49-4"><a href="#cb49-4"></a></span>
<span id="cb49-5"><a href="#cb49-5"></a>m_data <span class="ot">&lt;-</span> group_inc[group_inc<span class="sc">$</span>Gender <span class="sc">==</span> <span class="st">" Male"</span>, ]</span>
<span id="cb49-6"><a href="#cb49-6"></a><span class="fu">nrow</span>(m_data)</span>
<span id="cb49-7"><a href="#cb49-7"></a></span>
<span id="cb49-8"><a href="#cb49-8"></a>f_data <span class="ot">&lt;-</span> group_inc[group_inc<span class="sc">$</span>Gender <span class="sc">==</span> <span class="st">"Female"</span>, ]</span>
<span id="cb49-9"><a href="#cb49-9"></a><span class="fu">nrow</span>(f_data)</span>
<span id="cb49-10"><a href="#cb49-10"></a><span class="fu">with</span>(m_data, <span class="fu">plot</span>(Age, Income, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">col=</span><span class="st">"red"</span>))</span>
<span id="cb49-11"><a href="#cb49-11"></a><span class="fu">with</span>(f_data, <span class="fu">lines</span>(Age, Income, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">col =</span><span class="st">"blue"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
63
</div>
<div class="cell-output cell-output-display">
62
</div>
<div class="cell-output cell-output-display">
<p><img src="etl-dplyr_files/figure-html/cell-46-output-3.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="172">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1"></a>cd <span class="ot">&lt;-</span> Credit <span class="sc">%&gt;%</span></span>
<span id="cb50-2"><a href="#cb50-2"></a><span class="fu">select</span>(Income, Age, Gender) <span class="sc">%&gt;%</span></span>
<span id="cb50-3"><a href="#cb50-3"></a><span class="fu">group_by</span>(Age, Gender) <span class="sc">%&gt;%</span></span>
<span id="cb50-4"><a href="#cb50-4"></a><span class="fu">summarize</span>(<span class="at">Income =</span> <span class="fu">mean</span>(Income))</span>
<span id="cb50-5"><a href="#cb50-5"></a></span>
<span id="cb50-6"><a href="#cb50-6"></a>m_data <span class="ot">&lt;-</span> cd <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Gender <span class="sc">==</span> <span class="st">" Male"</span>)</span>
<span id="cb50-7"><a href="#cb50-7"></a><span class="fu">nrow</span>(m_data)</span>
<span id="cb50-8"><a href="#cb50-8"></a></span>
<span id="cb50-9"><a href="#cb50-9"></a>f_data <span class="ot">&lt;-</span> cd <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Gender <span class="sc">==</span> <span class="st">"Female"</span>)</span>
<span id="cb50-10"><a href="#cb50-10"></a><span class="fu">nrow</span>(f_data)</span>
<span id="cb50-11"><a href="#cb50-11"></a></span>
<span id="cb50-12"><a href="#cb50-12"></a><span class="fu">with</span>(m_data, <span class="fu">plot</span>(Age, Income, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">col=</span><span class="st">"red"</span>))</span>
<span id="cb50-13"><a href="#cb50-13"></a><span class="fu">with</span>(f_data, <span class="fu">lines</span>(Age, Income, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">col =</span><span class="st">"blue"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Age'. You can override using the `.groups`
argument.</code></pre>
</div>
<div class="cell-output cell-output-display">
63
</div>
<div class="cell-output cell-output-display">
62
</div>
<div class="cell-output cell-output-display">
<p><img src="etl-dplyr_files/figure-html/cell-47-output-4.png" class="img-fluid"></p>
</div>
</div>
<hr>
</section>
<section id="binding-rows-and-columns" class="level3" data-number="10.2.12">
<h3 data-number="10.2.12" class="anchored" data-anchor-id="binding-rows-and-columns"><span class="header-section-number">10.2.12</span> Binding rows and columns</h3>
<p><code>bind_rows(.data, …)</code> helps to unite two dataframes with the same columns order and names.</p>
<p>So, if we need add one data frame to an other vertically (bind rows) we shoul use <code>bind_rows</code>:</p>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="173">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1"></a>d2002 <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span></span>
<span id="cb52-2"><a href="#cb52-2"></a>            <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2002</span>) <span class="sc">%&gt;%</span> <span class="co"># year</span></span>
<span id="cb52-3"><a href="#cb52-3"></a>            <span class="fu">group_by</span>(continent, year) <span class="sc">%&gt;%</span> <span class="co"># grouping condition</span></span>
<span id="cb52-4"><a href="#cb52-4"></a>            <span class="fu">summarise</span>(</span>
<span id="cb52-5"><a href="#cb52-5"></a>                <span class="at">lifeExpAvg =</span> <span class="fu">mean</span>(lifeExp),</span>
<span id="cb52-6"><a href="#cb52-6"></a>                <span class="at">countriesCount =</span> <span class="fu">n</span>() <span class="co"># n() count of rows in group                </span></span>
<span id="cb52-7"><a href="#cb52-7"></a>            )</span>
<span id="cb52-8"><a href="#cb52-8"></a><span class="fu">head</span>(d2002)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'continent'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A grouped_df: 5 × 4</caption>
<thead>
    <tr><th scope="col">continent</th><th scope="col">year</th><th scope="col">lifeExpAvg</th><th scope="col">countriesCount</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Africa  </td><td>2002</td><td>53.32523</td><td>52</td></tr>
    <tr><td>Americas</td><td>2002</td><td>72.42204</td><td>25</td></tr>
    <tr><td>Asia    </td><td>2002</td><td>69.23388</td><td>33</td></tr>
    <tr><td>Europe  </td><td>2002</td><td>76.70060</td><td>30</td></tr>
    <tr><td>Oceania </td><td>2002</td><td>79.74000</td><td> 2</td></tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="174">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1"></a>d2007 <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span></span>
<span id="cb54-2"><a href="#cb54-2"></a>            <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span> <span class="co"># year</span></span>
<span id="cb54-3"><a href="#cb54-3"></a>            <span class="fu">group_by</span>(continent, year) <span class="sc">%&gt;%</span> <span class="co"># grouping condition</span></span>
<span id="cb54-4"><a href="#cb54-4"></a>            <span class="fu">summarise</span>(</span>
<span id="cb54-5"><a href="#cb54-5"></a>                <span class="at">lifeExpAvg =</span> <span class="fu">mean</span>(lifeExp),</span>
<span id="cb54-6"><a href="#cb54-6"></a>                <span class="at">countriesCount =</span> <span class="fu">n</span>() <span class="co"># n() count of rows in group                </span></span>
<span id="cb54-7"><a href="#cb54-7"></a>            )</span>
<span id="cb54-8"><a href="#cb54-8"></a><span class="fu">head</span>(d2007)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'continent'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A grouped_df: 5 × 4</caption>
<thead>
    <tr><th scope="col">continent</th><th scope="col">year</th><th scope="col">lifeExpAvg</th><th scope="col">countriesCount</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Africa  </td><td>2007</td><td>54.80604</td><td>52</td></tr>
    <tr><td>Americas</td><td>2007</td><td>73.60812</td><td>25</td></tr>
    <tr><td>Asia    </td><td>2007</td><td>70.72848</td><td>33</td></tr>
    <tr><td>Europe  </td><td>2007</td><td>77.64860</td><td>30</td></tr>
    <tr><td>Oceania </td><td>2007</td><td>80.71950</td><td> 2</td></tr>
</tbody>
</table>
</div>
</div>
<p>Unite them:</p>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="175">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1"></a>d2002 <span class="sc">%&gt;%</span> <span class="fu">bind_rows</span>(d2007) <span class="do">## bind rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A grouped_df: 10 × 4</caption>
<thead>
    <tr><th scope="col">continent</th><th scope="col">year</th><th scope="col">lifeExpAvg</th><th scope="col">countriesCount</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Africa  </td><td>2002</td><td>53.32523</td><td>52</td></tr>
    <tr><td>Americas</td><td>2002</td><td>72.42204</td><td>25</td></tr>
    <tr><td>Asia    </td><td>2002</td><td>69.23388</td><td>33</td></tr>
    <tr><td>Europe  </td><td>2002</td><td>76.70060</td><td>30</td></tr>
    <tr><td>Oceania </td><td>2002</td><td>79.74000</td><td> 2</td></tr>
    <tr><td>Africa  </td><td>2007</td><td>54.80604</td><td>52</td></tr>
    <tr><td>Americas</td><td>2007</td><td>73.60812</td><td>25</td></tr>
    <tr><td>Asia    </td><td>2007</td><td>70.72848</td><td>33</td></tr>
    <tr><td>Europe  </td><td>2007</td><td>77.64860</td><td>30</td></tr>
    <tr><td>Oceania </td><td>2007</td><td>80.71950</td><td> 2</td></tr>
</tbody>
</table>
</div>
</div>
<p><code>bind_cols(.data, …)</code> helps to unite two dataframes with the same rows count.</p>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="176">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1"></a>grouped_data2002pop <span class="ot">&lt;-</span> gapminder <span class="sc">%&gt;%</span></span>
<span id="cb57-2"><a href="#cb57-2"></a>    <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2002</span>) <span class="sc">%&gt;%</span> <span class="co"># year</span></span>
<span id="cb57-3"><a href="#cb57-3"></a>    <span class="fu">group_by</span>(continent) <span class="sc">%&gt;%</span> <span class="co"># grouping condition</span></span>
<span id="cb57-4"><a href="#cb57-4"></a>    <span class="fu">summarise</span>(<span class="at">totalPop =</span> <span class="fu">sum</span>(pop)) <span class="sc">%&gt;%</span></span>
<span id="cb57-5"><a href="#cb57-5"></a>    <span class="fu">mutate</span>(<span class="at">year =</span> <span class="dv">2002</span>)</span>
<span id="cb57-6"><a href="#cb57-6"></a>grouped_data2002pop</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A tibble: 5 × 3</caption>
<thead>
    <tr><th scope="col">continent</th><th scope="col">totalPop</th><th scope="col">year</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Africa  </td><td> 833723916</td><td>2002</td></tr>
    <tr><td>Americas</td><td> 849772762</td><td>2002</td></tr>
    <tr><td>Asia    </td><td>3601802203</td><td>2002</td></tr>
    <tr><td>Europe  </td><td> 578223869</td><td>2002</td></tr>
    <tr><td>Oceania </td><td>  23454829</td><td>2002</td></tr>
</tbody>
</table>
</div>
</div>
<p>Let’s combine <code>d2002</code> and <code>grouped_data2002pop</code>:</p>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="177">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1"></a>grouped_data <span class="ot">&lt;-</span> d2002 <span class="sc">%&gt;%</span> </span>
<span id="cb58-2"><a href="#cb58-2"></a>    <span class="fu">bind_cols</span>(grouped_data2002pop)</span>
<span id="cb58-3"><a href="#cb58-3"></a>grouped_data</span>
<span id="cb58-4"><a href="#cb58-4"></a></span>
<span id="cb58-5"><a href="#cb58-5"></a><span class="co"># columns with the same name were renamed!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
* `continent` -&gt; `continent...1`
* `year` -&gt; `year...2`
* `continent` -&gt; `continent...5`
* `year` -&gt; `year...7`</code></pre>
</div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A tibble: 5 × 7</caption>
<thead>
    <tr><th scope="col">continent...1</th><th scope="col">year...2</th><th scope="col">lifeExpAvg</th><th scope="col">countriesCount</th><th scope="col">continent...5</th><th scope="col">totalPop</th><th scope="col">year...7</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Africa  </td><td>2002</td><td>53.32523</td><td>52</td><td>Africa  </td><td> 833723916</td><td>2002</td></tr>
    <tr><td>Americas</td><td>2002</td><td>72.42204</td><td>25</td><td>Americas</td><td> 849772762</td><td>2002</td></tr>
    <tr><td>Asia    </td><td>2002</td><td>69.23388</td><td>33</td><td>Asia    </td><td>3601802203</td><td>2002</td></tr>
    <tr><td>Europe  </td><td>2002</td><td>76.70060</td><td>30</td><td>Europe  </td><td> 578223869</td><td>2002</td></tr>
    <tr><td>Oceania </td><td>2002</td><td>79.74000</td><td> 2</td><td>Oceania </td><td>  23454829</td><td>2002</td></tr>
</tbody>
</table>
</div>
</div>
<p>You can remove same named variables before binding:</p>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="178">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1"></a>grouped_data <span class="ot">&lt;-</span> d2002 <span class="sc">%&gt;%</span> </span>
<span id="cb60-2"><a href="#cb60-2"></a>    <span class="fu">bind_cols</span>(grouped_data2002pop <span class="sc">%&gt;%</span></span>
<span id="cb60-3"><a href="#cb60-3"></a>              <span class="fu">select</span>(<span class="sc">-</span>continent, <span class="sc">-</span>year))</span>
<span id="cb60-4"><a href="#cb60-4"></a>grouped_data</span>
<span id="cb60-5"><a href="#cb60-5"></a></span>
<span id="cb60-6"><a href="#cb60-6"></a><span class="co"># better, but continents order is not the same in both frames </span></span>
<span id="cb60-7"><a href="#cb60-7"></a><span class="co"># your data is going to be damaged</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A grouped_df: 5 × 5</caption>
<thead>
    <tr><th scope="col">continent</th><th scope="col">year</th><th scope="col">lifeExpAvg</th><th scope="col">countriesCount</th><th scope="col">totalPop</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Africa  </td><td>2002</td><td>53.32523</td><td>52</td><td> 833723916</td></tr>
    <tr><td>Americas</td><td>2002</td><td>72.42204</td><td>25</td><td> 849772762</td></tr>
    <tr><td>Asia    </td><td>2002</td><td>69.23388</td><td>33</td><td>3601802203</td></tr>
    <tr><td>Europe  </td><td>2002</td><td>76.70060</td><td>30</td><td> 578223869</td></tr>
    <tr><td>Oceania </td><td>2002</td><td>79.74000</td><td> 2</td><td>  23454829</td></tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="179">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1"></a>grouped_data2002pop <span class="ot">&lt;-</span> grouped_data2002pop <span class="sc">%&gt;%</span> </span>
<span id="cb61-2"><a href="#cb61-2"></a>    <span class="fu">arrange</span>(totalPop)</span>
<span id="cb61-3"><a href="#cb61-3"></a></span>
<span id="cb61-4"><a href="#cb61-4"></a>grouped_data <span class="ot">&lt;-</span> d2002 <span class="sc">%&gt;%</span> </span>
<span id="cb61-5"><a href="#cb61-5"></a>    <span class="fu">bind_cols</span>(grouped_data2002pop)</span>
<span id="cb61-6"><a href="#cb61-6"></a>grouped_data</span>
<span id="cb61-7"><a href="#cb61-7"></a></span>
<span id="cb61-8"><a href="#cb61-8"></a><span class="co"># you can see that continent fields different in the same row</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>New names:
* `continent` -&gt; `continent...1`
* `year` -&gt; `year...2`
* `continent` -&gt; `continent...5`
* `year` -&gt; `year...7`</code></pre>
</div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A tibble: 5 × 7</caption>
<thead>
    <tr><th scope="col">continent...1</th><th scope="col">year...2</th><th scope="col">lifeExpAvg</th><th scope="col">countriesCount</th><th scope="col">continent...5</th><th scope="col">totalPop</th><th scope="col">year...7</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Africa  </td><td>2002</td><td>53.32523</td><td>52</td><td>Oceania </td><td>  23454829</td><td>2002</td></tr>
    <tr><td>Americas</td><td>2002</td><td>72.42204</td><td>25</td><td>Europe  </td><td> 578223869</td><td>2002</td></tr>
    <tr><td>Asia    </td><td>2002</td><td>69.23388</td><td>33</td><td>Africa  </td><td> 833723916</td><td>2002</td></tr>
    <tr><td>Europe  </td><td>2002</td><td>76.70060</td><td>30</td><td>Americas</td><td> 849772762</td><td>2002</td></tr>
    <tr><td>Oceania </td><td>2002</td><td>79.74000</td><td> 2</td><td>Asia    </td><td>3601802203</td><td>2002</td></tr>
</tbody>
</table>
</div>
</div>
<hr>
</section>
<section id="joining-data" class="level3" data-number="10.2.13">
<h3 data-number="10.2.13" class="anchored" data-anchor-id="joining-data"><span class="header-section-number">10.2.13</span> <code>Join()</code>ing data</h3>
<p>To solve previous problem you can use set of <code>join()</code>-functions. <code>left_join()</code> can solve our previous example:</p>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="180">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1"></a>grouped_data2002pop <span class="ot">&lt;-</span> grouped_data2002pop <span class="sc">%&gt;%</span> </span>
<span id="cb63-2"><a href="#cb63-2"></a>    <span class="fu">arrange</span>(totalPop)</span>
<span id="cb63-3"><a href="#cb63-3"></a></span>
<span id="cb63-4"><a href="#cb63-4"></a>grouped_data <span class="ot">&lt;-</span> d2002 <span class="sc">%&gt;%</span> </span>
<span id="cb63-5"><a href="#cb63-5"></a>    <span class="fu">left_join</span>(grouped_data2002pop, <span class="at">by =</span> <span class="st">"continent"</span>)</span>
<span id="cb63-6"><a href="#cb63-6"></a>grouped_data</span>
<span id="cb63-7"><a href="#cb63-7"></a></span>
<span id="cb63-8"><a href="#cb63-8"></a><span class="co"># but we have duplicated year</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A grouped_df: 5 × 6</caption>
<thead>
    <tr><th scope="col">continent</th><th scope="col">year.x</th><th scope="col">lifeExpAvg</th><th scope="col">countriesCount</th><th scope="col">totalPop</th><th scope="col">year.y</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Africa  </td><td>2002</td><td>53.32523</td><td>52</td><td> 833723916</td><td>2002</td></tr>
    <tr><td>Americas</td><td>2002</td><td>72.42204</td><td>25</td><td> 849772762</td><td>2002</td></tr>
    <tr><td>Asia    </td><td>2002</td><td>69.23388</td><td>33</td><td>3601802203</td><td>2002</td></tr>
    <tr><td>Europe  </td><td>2002</td><td>76.70060</td><td>30</td><td> 578223869</td><td>2002</td></tr>
    <tr><td>Oceania </td><td>2002</td><td>79.74000</td><td> 2</td><td>  23454829</td><td>2002</td></tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="181">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1"></a>grouped_data2002pop <span class="ot">&lt;-</span> grouped_data2002pop <span class="sc">%&gt;%</span> </span>
<span id="cb64-2"><a href="#cb64-2"></a>    <span class="fu">arrange</span>(totalPop)</span>
<span id="cb64-3"><a href="#cb64-3"></a></span>
<span id="cb64-4"><a href="#cb64-4"></a>grouped_data <span class="ot">&lt;-</span> d2002 <span class="sc">%&gt;%</span> </span>
<span id="cb64-5"><a href="#cb64-5"></a>    <span class="fu">left_join</span>(grouped_data2002pop, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"continent"</span>, <span class="st">"year"</span>))</span>
<span id="cb64-6"><a href="#cb64-6"></a>grouped_data</span>
<span id="cb64-7"><a href="#cb64-7"></a></span>
<span id="cb64-8"><a href="#cb64-8"></a><span class="co">#ok</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A grouped_df: 5 × 5</caption>
<thead>
    <tr><th scope="col">continent</th><th scope="col">year</th><th scope="col">lifeExpAvg</th><th scope="col">countriesCount</th><th scope="col">totalPop</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Africa  </td><td>2002</td><td>53.32523</td><td>52</td><td> 833723916</td></tr>
    <tr><td>Americas</td><td>2002</td><td>72.42204</td><td>25</td><td> 849772762</td></tr>
    <tr><td>Asia    </td><td>2002</td><td>69.23388</td><td>33</td><td>3601802203</td></tr>
    <tr><td>Europe  </td><td>2002</td><td>76.70060</td><td>30</td><td> 578223869</td></tr>
    <tr><td>Oceania </td><td>2002</td><td>79.74000</td><td> 2</td><td>  23454829</td></tr>
</tbody>
</table>
</div>
</div>
<p>Let’s make a different data sets for testing <code>join()</code> fucntions:</p>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="182">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1"></a>first_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Letter =</span> <span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span>, <span class="st">"E"</span>),</span>
<span id="cb65-2"><a href="#cb65-2"></a>                      <span class="at">Value =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>))</span>
<span id="cb65-3"><a href="#cb65-3"></a></span>
<span id="cb65-4"><a href="#cb65-4"></a>second_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Letter =</span> <span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span>, <span class="st">"F"</span>),</span>
<span id="cb65-5"><a href="#cb65-5"></a>                      <span class="at">Value =</span> <span class="fu">c</span>(<span class="dv">12</span>, <span class="dv">7</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">5</span>))</span>
<span id="cb65-6"><a href="#cb65-6"></a>first_df</span>
<span id="cb65-7"><a href="#cb65-7"></a>second_df </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A data.frame: 5 × 2</caption>
<thead>
    <tr><th scope="col">Letter</th><th scope="col">Value</th></tr>
    <tr><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;int&gt;</th></tr>
</thead>
<tbody>
    <tr><td>A</td><td>1</td></tr>
    <tr><td>B</td><td>2</td></tr>
    <tr><td>C</td><td>3</td></tr>
    <tr><td>D</td><td>4</td></tr>
    <tr><td>E</td><td>5</td></tr>
</tbody>
</table>
</div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A data.frame: 5 × 2</caption>
<thead>
    <tr><th scope="col">Letter</th><th scope="col">Value</th></tr>
    <tr><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>A</td><td>12</td></tr>
    <tr><td>B</td><td> 7</td></tr>
    <tr><td>C</td><td> 4</td></tr>
    <tr><td>D</td><td> 1</td></tr>
    <tr><td>F</td><td> 5</td></tr>
</tbody>
</table>
</div>
</div>
<p>You can see that the last row <code>Letter</code> is different in dataframes. <code>left_join()</code> test is next.</p>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="183">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1"></a>first_df <span class="sc">%&gt;%</span> </span>
<span id="cb66-2"><a href="#cb66-2"></a>    <span class="fu">left_join</span>(second_df, <span class="at">by =</span> <span class="st">"Letter"</span>)</span>
<span id="cb66-3"><a href="#cb66-3"></a><span class="co"># there is no F letter, becouse first_db joined only known first_df Letters.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A data.frame: 5 × 3</caption>
<thead>
    <tr><th scope="col">Letter</th><th scope="col">Value.x</th><th scope="col">Value.y</th></tr>
    <tr><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>A</td><td>1</td><td>12</td></tr>
    <tr><td>B</td><td>2</td><td> 7</td></tr>
    <tr><td>C</td><td>3</td><td> 4</td></tr>
    <tr><td>D</td><td>4</td><td> 1</td></tr>
    <tr><td>E</td><td>5</td><td>NA</td></tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="184">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1"></a>first_df <span class="sc">%&gt;%</span> </span>
<span id="cb67-2"><a href="#cb67-2"></a>    <span class="fu">right_join</span>(second_df, <span class="at">by =</span> <span class="st">"Letter"</span>)</span>
<span id="cb67-3"><a href="#cb67-3"></a><span class="co"># right_join! there is no E letter, becouse first_db joined only known second_df Letters.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A data.frame: 5 × 3</caption>
<thead>
    <tr><th scope="col">Letter</th><th scope="col">Value.x</th><th scope="col">Value.y</th></tr>
    <tr><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>A</td><td> 1</td><td>12</td></tr>
    <tr><td>B</td><td> 2</td><td> 7</td></tr>
    <tr><td>C</td><td> 3</td><td> 4</td></tr>
    <tr><td>D</td><td> 4</td><td> 1</td></tr>
    <tr><td>F</td><td>NA</td><td> 5</td></tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="185">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1"></a>first_df <span class="sc">%&gt;%</span> </span>
<span id="cb68-2"><a href="#cb68-2"></a>    <span class="fu">inner_join</span>(second_df, <span class="at">by =</span> <span class="st">"Letter"</span>)</span>
<span id="cb68-3"><a href="#cb68-3"></a><span class="co"># inner_join! there is no E and F Letters, </span></span>
<span id="cb68-4"><a href="#cb68-4"></a><span class="co"># only known both first_df and second_df are left here.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A data.frame: 4 × 3</caption>
<thead>
    <tr><th scope="col">Letter</th><th scope="col">Value.x</th><th scope="col">Value.y</th></tr>
    <tr><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>A</td><td>1</td><td>12</td></tr>
    <tr><td>B</td><td>2</td><td> 7</td></tr>
    <tr><td>C</td><td>3</td><td> 4</td></tr>
    <tr><td>D</td><td>4</td><td> 1</td></tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="186">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1"></a>first_df <span class="sc">%&gt;%</span> </span>
<span id="cb69-2"><a href="#cb69-2"></a>    <span class="fu">full_join</span>(second_df, <span class="at">by =</span> <span class="st">"Letter"</span>)</span>
<span id="cb69-3"><a href="#cb69-3"></a><span class="co"># all are here, but unknown values replaced by NA, it's ok.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A data.frame: 6 × 3</caption>
<thead>
    <tr><th scope="col">Letter</th><th scope="col">Value.x</th><th scope="col">Value.y</th></tr>
    <tr><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>A</td><td> 1</td><td>12</td></tr>
    <tr><td>B</td><td> 2</td><td> 7</td></tr>
    <tr><td>C</td><td> 3</td><td> 4</td></tr>
    <tr><td>D</td><td> 4</td><td> 1</td></tr>
    <tr><td>E</td><td> 5</td><td>NA</td></tr>
    <tr><td>F</td><td>NA</td><td> 5</td></tr>
</tbody>
</table>
</div>
</div>
<p>Short description of reviewed functions:</p>
<table class="table">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th>Function</th>
<th>Objectives</th>
<th>Arguments</th>
<th>Multiple keys</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>left_join()</code></td>
<td>Merge two datasets. Keep all observations from the origin table</td>
<td>data, origin, destination, by = “ID”</td>
<td>origin, destination, by = c(“ID”, “ID2”)</td>
</tr>
<tr class="even">
<td><code>right_join()</code></td>
<td>Merge two datasets. Keep all observations from the destination table</td>
<td>data, origin, destination, by = “ID”</td>
<td>origin, destination, by = c(“ID”, “ID2”)</td>
</tr>
<tr class="odd">
<td><code>inner_join()</code></td>
<td>Merge two datasets. Excludes all unmatched rows</td>
<td>data, origin, destination, by = “ID”</td>
<td>origin, destination, by = c(“ID”, “ID2”)</td>
</tr>
<tr class="even">
<td><code>full_join()</code></td>
<td>Merge two datasets. Keeps all observations</td>
<td>data, origin, destination, by = “ID”</td>
<td>origin, destination, by = c(“ID”, “ID2”)</td>
</tr>
</tbody>
</table>
<hr>
</section>
<section id="data-cleaning-with-gather" class="level3" data-number="10.2.14">
<h3 data-number="10.2.14" class="anchored" data-anchor-id="data-cleaning-with-gather"><span class="header-section-number">10.2.14</span> Data cleaning with <code>gather()</code></h3>
<p>Some times your data is not in tidy format. Peole can collect data year by year in each column. It’s problem to use such data for feature engeniering and building prediction models. Let’s generate such data sample (quaterly salary of some people).</p>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="187">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1"></a>not_good_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Name =</span> <span class="fu">c</span>(<span class="st">"Nick"</span>, <span class="st">"Jake"</span>, <span class="st">"Anna"</span>, <span class="st">"Jane"</span>, <span class="st">"Dina"</span>),</span>
<span id="cb70-2"><a href="#cb70-2"></a>                           <span class="at">q1_2021 =</span> <span class="fu">c</span>(<span class="dv">12442</span>, <span class="dv">22131</span>, <span class="dv">21343</span>, <span class="dv">22111</span>, <span class="dv">14123</span>),</span>
<span id="cb70-3"><a href="#cb70-3"></a>                           <span class="at">q2_2021 =</span> <span class="fu">c</span>(<span class="dv">13442</span>, <span class="dv">22871</span>, <span class="dv">20343</span>, <span class="dv">22222</span>, <span class="dv">14456</span>),</span>
<span id="cb70-4"><a href="#cb70-4"></a>                           <span class="at">q3_2021 =</span> <span class="fu">c</span>(<span class="dv">15482</span>, <span class="dv">22031</span>, <span class="dv">22456</span>, <span class="dv">22444</span>, <span class="dv">14533</span>),</span>
<span id="cb70-5"><a href="#cb70-5"></a>                           <span class="at">q4_2021 =</span> <span class="fu">c</span>(<span class="dv">14511</span>, <span class="dv">20031</span>, <span class="dv">21741</span>, <span class="dv">22333</span>, <span class="dv">14511</span>))</span>
<span id="cb70-6"><a href="#cb70-6"></a>not_good_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A data.frame: 5 × 5</caption>
<thead>
    <tr><th scope="col">Name</th><th scope="col">q1_2021</th><th scope="col">q2_2021</th><th scope="col">q3_2021</th><th scope="col">q4_2021</th></tr>
    <tr><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Nick</td><td>12442</td><td>13442</td><td>15482</td><td>14511</td></tr>
    <tr><td>Jake</td><td>22131</td><td>22871</td><td>22031</td><td>20031</td></tr>
    <tr><td>Anna</td><td>21343</td><td>20343</td><td>22456</td><td>21741</td></tr>
    <tr><td>Jane</td><td>22111</td><td>22222</td><td>22444</td><td>22333</td></tr>
    <tr><td>Dina</td><td>14123</td><td>14456</td><td>14533</td><td>14511</td></tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="188">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1"></a>better_data <span class="ot">&lt;-</span> not_good_data <span class="sc">%&gt;%</span></span>
<span id="cb71-2"><a href="#cb71-2"></a>                <span class="fu">gather</span>(quater, salary, <span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb71-3"><a href="#cb71-3"></a>                <span class="co"># gather(quater, salary, q1_2021:q4_2021) possible code too</span></span>
<span id="cb71-4"><a href="#cb71-4"></a>better_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A data.frame: 20 × 3</caption>
<thead>
    <tr><th scope="col">Name</th><th scope="col">quater</th><th scope="col">salary</th></tr>
    <tr><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Nick</td><td>q1_2021</td><td>12442</td></tr>
    <tr><td>Jake</td><td>q1_2021</td><td>22131</td></tr>
    <tr><td>Anna</td><td>q1_2021</td><td>21343</td></tr>
    <tr><td>Jane</td><td>q1_2021</td><td>22111</td></tr>
    <tr><td>Dina</td><td>q1_2021</td><td>14123</td></tr>
    <tr><td>Nick</td><td>q2_2021</td><td>13442</td></tr>
    <tr><td>Jake</td><td>q2_2021</td><td>22871</td></tr>
    <tr><td>Anna</td><td>q2_2021</td><td>20343</td></tr>
    <tr><td>Jane</td><td>q2_2021</td><td>22222</td></tr>
    <tr><td>Dina</td><td>q2_2021</td><td>14456</td></tr>
    <tr><td>Nick</td><td>q3_2021</td><td>15482</td></tr>
    <tr><td>Jake</td><td>q3_2021</td><td>22031</td></tr>
    <tr><td>Anna</td><td>q3_2021</td><td>22456</td></tr>
    <tr><td>Jane</td><td>q3_2021</td><td>22444</td></tr>
    <tr><td>Dina</td><td>q3_2021</td><td>14533</td></tr>
    <tr><td>Nick</td><td>q4_2021</td><td>14511</td></tr>
    <tr><td>Jake</td><td>q4_2021</td><td>20031</td></tr>
    <tr><td>Anna</td><td>q4_2021</td><td>21741</td></tr>
    <tr><td>Jane</td><td>q4_2021</td><td>22333</td></tr>
    <tr><td>Dina</td><td>q4_2021</td><td>14511</td></tr>
</tbody>
</table>
</div>
</div>
<p>To make our data tidier <code>separate()</code> can split quater column into 2 (<code>quater</code> and <code>year</code>):</p>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="189">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1"></a>best_data <span class="ot">&lt;-</span> better_data <span class="sc">%&gt;%</span></span>
<span id="cb72-2"><a href="#cb72-2"></a>    <span class="fu">separate</span>(quater, <span class="fu">c</span>(<span class="st">"quater"</span>, <span class="st">"year"</span>), <span class="at">sep =</span> <span class="st">"_"</span>) <span class="sc">%&gt;%</span> <span class="co"># separate</span></span>
<span id="cb72-3"><a href="#cb72-3"></a>    <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">as.integer</span>(year), <span class="co"># convert year to integer</span></span>
<span id="cb72-4"><a href="#cb72-4"></a>           <span class="at">quater =</span> <span class="fu">substr</span>(better_data<span class="sc">$</span>quater, <span class="dv">2</span>,<span class="dv">2</span>), <span class="co"># trim `q` from start</span></span>
<span id="cb72-5"><a href="#cb72-5"></a>           <span class="at">quater =</span> <span class="fu">as.integer</span>(quater), <span class="co"># convert quater to integer</span></span>
<span id="cb72-6"><a href="#cb72-6"></a>          ) <span class="sc">%&gt;%</span></span>
<span id="cb72-7"><a href="#cb72-7"></a>    <span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb72-8"><a href="#cb72-8"></a>best_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A data.frame: 10 × 4</caption>
<thead>
    <tr><th></th><th scope="col">Name</th><th scope="col">quater</th><th scope="col">year</th><th scope="col">salary</th></tr>
    <tr><th></th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><th scope="row">1</th><td>Nick</td><td>1</td><td>2021</td><td>12442</td></tr>
    <tr><th scope="row">2</th><td>Jake</td><td>1</td><td>2021</td><td>22131</td></tr>
    <tr><th scope="row">3</th><td>Anna</td><td>1</td><td>2021</td><td>21343</td></tr>
    <tr><th scope="row">4</th><td>Jane</td><td>1</td><td>2021</td><td>22111</td></tr>
    <tr><th scope="row">5</th><td>Dina</td><td>1</td><td>2021</td><td>14123</td></tr>
    <tr><th scope="row">6</th><td>Nick</td><td>2</td><td>2021</td><td>13442</td></tr>
    <tr><th scope="row">7</th><td>Jake</td><td>2</td><td>2021</td><td>22871</td></tr>
    <tr><th scope="row">8</th><td>Anna</td><td>2</td><td>2021</td><td>20343</td></tr>
    <tr><th scope="row">9</th><td>Jane</td><td>2</td><td>2021</td><td>22222</td></tr>
    <tr><th scope="row">10</th><td>Dina</td><td>2</td><td>2021</td><td>14456</td></tr>
</tbody>
</table>
</div>
</div>
<p>The <code>unite()</code> function concanates two columns into one:</p>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="190">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1"></a>united_data <span class="ot">&lt;-</span> best_data <span class="sc">%&gt;%</span></span>
<span id="cb73-2"><a href="#cb73-2"></a>                <span class="fu">unite</span>(Qt, quater, year, <span class="at">sep =</span> <span class="st">"#"</span>)</span>
<span id="cb73-3"><a href="#cb73-3"></a>united_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A data.frame: 10 × 3</caption>
<thead>
    <tr><th></th><th scope="col">Name</th><th scope="col">Qt</th><th scope="col">salary</th></tr>
    <tr><th></th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><th scope="row">1</th><td>Nick</td><td>1#2021</td><td>12442</td></tr>
    <tr><th scope="row">2</th><td>Jake</td><td>1#2021</td><td>22131</td></tr>
    <tr><th scope="row">3</th><td>Anna</td><td>1#2021</td><td>21343</td></tr>
    <tr><th scope="row">4</th><td>Jane</td><td>1#2021</td><td>22111</td></tr>
    <tr><th scope="row">5</th><td>Dina</td><td>1#2021</td><td>14123</td></tr>
    <tr><th scope="row">6</th><td>Nick</td><td>2#2021</td><td>13442</td></tr>
    <tr><th scope="row">7</th><td>Jake</td><td>2#2021</td><td>22871</td></tr>
    <tr><th scope="row">8</th><td>Anna</td><td>2#2021</td><td>20343</td></tr>
    <tr><th scope="row">9</th><td>Jane</td><td>2#2021</td><td>22222</td></tr>
    <tr><th scope="row">10</th><td>Dina</td><td>2#2021</td><td>14456</td></tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="191">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1"></a><span class="co"># if dont want remove old columns use remove param</span></span>
<span id="cb74-2"><a href="#cb74-2"></a>united_data <span class="ot">&lt;-</span> best_data <span class="sc">%&gt;%</span></span>
<span id="cb74-3"><a href="#cb74-3"></a>                <span class="fu">unite</span>(Qt, quater, year, <span class="at">sep =</span> <span class="st">"#"</span>, <span class="at">remove =</span> F)</span>
<span id="cb74-4"><a href="#cb74-4"></a>united_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A data.frame: 10 × 5</caption>
<thead>
    <tr><th></th><th scope="col">Name</th><th scope="col">Qt</th><th scope="col">quater</th><th scope="col">year</th><th scope="col">salary</th></tr>
    <tr><th></th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><th scope="row">1</th><td>Nick</td><td>1#2021</td><td>1</td><td>2021</td><td>12442</td></tr>
    <tr><th scope="row">2</th><td>Jake</td><td>1#2021</td><td>1</td><td>2021</td><td>22131</td></tr>
    <tr><th scope="row">3</th><td>Anna</td><td>1#2021</td><td>1</td><td>2021</td><td>21343</td></tr>
    <tr><th scope="row">4</th><td>Jane</td><td>1#2021</td><td>1</td><td>2021</td><td>22111</td></tr>
    <tr><th scope="row">5</th><td>Dina</td><td>1#2021</td><td>1</td><td>2021</td><td>14123</td></tr>
    <tr><th scope="row">6</th><td>Nick</td><td>2#2021</td><td>2</td><td>2021</td><td>13442</td></tr>
    <tr><th scope="row">7</th><td>Jake</td><td>2#2021</td><td>2</td><td>2021</td><td>22871</td></tr>
    <tr><th scope="row">8</th><td>Anna</td><td>2#2021</td><td>2</td><td>2021</td><td>20343</td></tr>
    <tr><th scope="row">9</th><td>Jane</td><td>2#2021</td><td>2</td><td>2021</td><td>22222</td></tr>
    <tr><th scope="row">10</th><td>Dina</td><td>2#2021</td><td>2</td><td>2021</td><td>14456</td></tr>
</tbody>
</table>
</div>
</div>
<p>If you need to make table like initial use <code>spread()</code> function:</p>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="192">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1"></a>not_good_data2 <span class="ot">&lt;-</span> better_data <span class="sc">%&gt;%</span></span>
<span id="cb75-2"><a href="#cb75-2"></a>                    <span class="fu">spread</span>(quater, salary)</span>
<span id="cb75-3"><a href="#cb75-3"></a>not_good_data2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A data.frame: 5 × 5</caption>
<thead>
    <tr><th scope="col">Name</th><th scope="col">q1_2021</th><th scope="col">q2_2021</th><th scope="col">q3_2021</th><th scope="col">q4_2021</th></tr>
    <tr><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Anna</td><td>21343</td><td>20343</td><td>22456</td><td>21741</td></tr>
    <tr><td>Dina</td><td>14123</td><td>14456</td><td>14533</td><td>14511</td></tr>
    <tr><td>Jake</td><td>22131</td><td>22871</td><td>22031</td><td>20031</td></tr>
    <tr><td>Jane</td><td>22111</td><td>22222</td><td>22444</td><td>22333</td></tr>
    <tr><td>Nick</td><td>12442</td><td>13442</td><td>15482</td><td>14511</td></tr>
</tbody>
</table>
</div>
</div>
<p>Let’s try to <code>spread()</code> feild <code>pop</code> of <code>gapminder</code> by year:</p>
<div class="cell" data-vscode="{&quot;languageId&quot;:&quot;r&quot;}" data-execution_count="193">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1"></a>gapminder <span class="sc">%&gt;%</span> <span class="fu">select</span>(country, pop, year) <span class="sc">%&gt;%</span></span>
<span id="cb76-2"><a href="#cb76-2"></a>                <span class="fu">spread</span>(year, pop) <span class="sc">%&gt;%</span></span>
<span id="cb76-3"><a href="#cb76-3"></a>                <span class="fu">head</span>() <span class="co"># for shorter code</span></span>
<span id="cb76-4"><a href="#cb76-4"></a></span>
<span id="cb76-5"><a href="#cb76-5"></a><span class="co"># now you can easy send data to your director in excel :)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A tibble: 6 × 13</caption>
<thead>
    <tr><th scope="col">country</th><th scope="col">1952</th><th scope="col">1957</th><th scope="col">1962</th><th scope="col">1967</th><th scope="col">1972</th><th scope="col">1977</th><th scope="col">1982</th><th scope="col">1987</th><th scope="col">1992</th><th scope="col">1997</th><th scope="col">2002</th><th scope="col">2007</th></tr>
    <tr><th scope="col">&lt;fct&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;int&gt;</th></tr>
</thead>
<tbody>
    <tr><td>Afghanistan</td><td> 8425333</td><td> 9240934</td><td>10267083</td><td>11537966</td><td>13079460</td><td>14880372</td><td>12881816</td><td>13867957</td><td>16317921</td><td>22227415</td><td>25268405</td><td>31889923</td></tr>
    <tr><td>Albania    </td><td> 1282697</td><td> 1476505</td><td> 1728137</td><td> 1984060</td><td> 2263554</td><td> 2509048</td><td> 2780097</td><td> 3075321</td><td> 3326498</td><td> 3428038</td><td> 3508512</td><td> 3600523</td></tr>
    <tr><td>Algeria    </td><td> 9279525</td><td>10270856</td><td>11000948</td><td>12760499</td><td>14760787</td><td>17152804</td><td>20033753</td><td>23254956</td><td>26298373</td><td>29072015</td><td>31287142</td><td>33333216</td></tr>
    <tr><td>Angola     </td><td> 4232095</td><td> 4561361</td><td> 4826015</td><td> 5247469</td><td> 5894858</td><td> 6162675</td><td> 7016384</td><td> 7874230</td><td> 8735988</td><td> 9875024</td><td>10866106</td><td>12420476</td></tr>
    <tr><td>Argentina  </td><td>17876956</td><td>19610538</td><td>21283783</td><td>22934225</td><td>24779799</td><td>26983828</td><td>29341374</td><td>31620918</td><td>33958947</td><td>36203463</td><td>38331121</td><td>40301927</td></tr>
    <tr><td>Australia  </td><td> 8691212</td><td> 9712569</td><td>10794968</td><td>11872264</td><td>13177000</td><td>14074100</td><td>15184200</td><td>16257249</td><td>17481977</td><td>18565243</td><td>19546792</td><td>20434176</td></tr>
</tbody>
</table>
</div>
</div>
<p>Functions table:</p>
<table class="table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th>Function</th>
<th>Objectives</th>
<th>Arguments</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>gather()</code></td>
<td>Transform the data from wide to long</td>
<td>(data, key, value, na.rm = FALSE)</td>
</tr>
<tr class="even">
<td><code>spread()</code></td>
<td>Transform the data from long to wide</td>
<td>(data, key, value)</td>
</tr>
<tr class="odd">
<td><code>separate()</code></td>
<td>Split one variables into two</td>
<td>(data, col, into, sep= ““, remove = TRUE)</td>
</tr>
<tr class="even">
<td><code>unite()</code></td>
<td>Unite two variables into one</td>
<td>(data, col, conc ,sep= ““, remove = TRUE)</td>
</tr>
</tbody>
</table>
<hr>
</section>
</section>
<section id="refences" class="level2" data-number="10.3">
<h2 data-number="10.3" class="anchored" data-anchor-id="refences"><span class="header-section-number">10.3</span> Refences</h2>
<ol type="1">
<li><a href="https://cran.r-project.org/web/packages/dplyr/index.html">dplyr: A Grammar of Data Manipulation</a> on https://cran.r-project.org/.</li>
<li><a href="https://github.com/rstudio/cheatsheets/blob/master/data-transformation.pdf">Data Transformation with splyr::cheat sheet</a>.</li>
<li><a href="https://www.listendata.com/2016/08/dplyr-tutorial.html">DPLYR TUTORIAL : DATA MANIPULATION (50 EXAMPLES)</a> by Deepanshu Bhalla.</li>
<li><a href="https://stat545.com/dplyr-intro.html">Dplyr Intro</a> by Stat 545. 6.<a href="https://www.guru99.com/r-dplyr-tutorial.html">R Dplyr Tutorial: Data Manipulation(Join) &amp; Cleaning(Spread)</a>. Introduction to Data Analysis</li>
<li><a href="https://www.kaggle.com/kmldas/loan-default-prediction">Loan Default Prediction. Beginners data set for financial analytics Kaggle</a></li>
</ol>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./28-r-html.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Web-pages (HTML)</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./data-cleaning.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Підготовка та очистка даних у R</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
      <div class="nav-footer-center">Copyright 2023, Юрій Клебан</div>
  </div>
</footer>



</body></html>