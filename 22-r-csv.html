<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Юрій Клебан">

<title>Основи роботи з даними в R - 3&nbsp; CSV</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./23-r-xlsx.html" rel="next">
<link href="./21-data-read.html" rel="prev">
<link href="./img/favicon.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="css/style.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">CSV</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Основи роботи з даними в R</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/kleban/data-r/" title="Source Code" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
    <a href="" title="Share" id="sidebar-tool-dropdown-0" class="sidebar-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi bi-share"></i></a>
    <ul class="dropdown-menu" aria-labelledby="sidebar-tool-dropdown-0">
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
            <i class="bi bi-bi-twitter pe-1"></i>
          Twitter
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
            <i class="bi bi-bi-facebook pe-1"></i>
          Facebook
          </a>
        </li>
        <li>
          <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=|url|">
            <i class="bi bi-bi-linkedin pe-1"></i>
          LinkedIn
          </a>
        </li>
    </ul>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Про посібник</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-intro.html" class="sidebar-item-text sidebar-link">Вступ</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Тема 1. Вступ до аналізу даних</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-intro.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Вступ</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">Тема 2. Читання даних: типи файлів, формати, пакети R, сервіси</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./21-data-read.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Презентація до лекції</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./22-r-csv.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">CSV</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./23-r-xlsx.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">MS Excel (xlsx)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./24-r-xml.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">XML</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">Список використаних джерел</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Зміст</h2>
   
  <ul>
  <li><a href="#what-is-csv-comma-separated-values" id="toc-what-is-csv-comma-separated-values" class="nav-link active" data-scroll-target="#what-is-csv-comma-separated-values"><span class="toc-section-number">3.1</span>  What is CSV (Comma Separated Values)?</a></li>
  <li><a href="#sample-dataset-description" id="toc-sample-dataset-description" class="nav-link" data-scroll-target="#sample-dataset-description"><span class="toc-section-number">3.2</span>  Sample dataset description</a></li>
  <li><a href="#reading" id="toc-reading" class="nav-link" data-scroll-target="#reading"><span class="toc-section-number">3.3</span>  Reading</a></li>
  <li><a href="#readr-package" id="toc-readr-package" class="nav-link" data-scroll-target="#readr-package"><span class="toc-section-number">3.4</span>  <code>readr</code> package</a></li>
  <li><a href="#набори-даних" id="toc-набори-даних" class="nav-link" data-scroll-target="#набори-даних"><span class="toc-section-number">3.5</span>  Набори даних</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references"><span class="toc-section-number">3.6</span>  References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">CSV</span></h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Автор</div>
    <div class="quarto-title-meta-contents">
             <p>Юрій Клебан </p>
          </div>
  </div>
    
    
  </div>
  

</header>

<hr>
<p>You need this packages for code execution:</p>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># install.packages("readr")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="79">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="fu">invisible</span>(<span class="fu">Sys.setlocale</span>(<span class="st">"LC_ALL"</span>, <span class="st">"Ukrainian"</span>))</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="fu">invisible</span>(<span class="fu">options</span>(<span class="at">warn=</span><span class="sc">-</span><span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<section id="what-is-csv-comma-separated-values" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="what-is-csv-comma-separated-values"><span class="header-section-number">3.1</span> What is CSV (Comma Separated Values)?</h2>
<p><code>CSV</code> - comma separated values.</p>
<div class="cell" data-execution_count="80">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="co"># lets check current working directory to write correct files path</span></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="fu">getwd</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
'E:/Repos/Season 2022/r-book/_book/docs/data-analysis-en'
</div>
</div>
<p>You can use <code>/</code> or <code>\\</code> for writing correct path in R. For example:</p>
<div class="cell" data-execution_count="81">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>path <span class="ot">=</span> <span class="st">"d:/projects/file.csv"</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>path <span class="ot">=</span> <span class="st">"d:</span><span class="sc">\\</span><span class="st">projects</span><span class="sc">\\</span><span class="st">file.csv"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To combine path use <code>paste()</code> or <code>paste0()</code> functions</p>
<div class="cell" data-execution_count="82">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>work_dir <span class="ot">=</span> <span class="fu">getwd</span>()</span>
<span id="cb5-2"><a href="#cb5-2"></a>work_dir </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
'E:/Repos/Season 2022/r-book/_book/docs/data-analysis-en'
</div>
</div>
<div class="cell" data-execution_count="83">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>file_name <span class="ot">=</span> <span class="st">"temp_file.csv"</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>file_path <span class="ot">=</span> <span class="fu">paste0</span>(work_dir, <span class="st">"/"</span>, file_name)</span>
<span id="cb6-3"><a href="#cb6-3"></a>file_path</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
'E:/Repos/Season 2022/r-book/_book/docs/data-analysis-en/temp_file.csv'
</div>
</div>
<div class="cell" data-execution_count="84">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>file_path <span class="ot">=</span> <span class="fu">paste</span>(work_dir, file_name, <span class="at">sep =</span> <span class="st">"/"</span>)</span>
<span id="cb7-2"><a href="#cb7-2"></a>file_path</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
'E:/Repos/Season 2022/r-book/_book/docs/data-analysis-en/temp_file.csv'
</div>
</div>
</section>
<section id="sample-dataset-description" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="sample-dataset-description"><span class="header-section-number">3.2</span> Sample dataset description</h2>
<p>Information about dataset from <a href="kaggle.com">kaggle.com</a>. Original file located at url: <a href="https://www.kaggle.com/radmirzosimov/telecom-users-dataset">https://www.kaggle.com/radmirzosimov/telecom-users-dataset</a>.</p>
<p>Any business wants to maximize the number of customers. To achieve this goal, it is important not only to try to attract new ones, but also to retain existing ones. Retaining a client will cost the company less than attracting a new one. In addition, a new client may be weakly interested in business services and it will be difficult to work with him, while old clients already have the necessary data on interaction with the service.</p>
<p>Accordingly, predicting the churn, we can react in time and try to keep the client who wants to leave. Based on the data about the services that the client uses, we can make him a special offer, trying to change his decision to leave the operator. This will make the task of retention easier to implement than the task of attracting new users, about which we do not know anything yet.</p>
<p>You are provided with a dataset from a telecommunications company. The data contains information about almost six thousand users, their demographic characteristics, the services they use, the duration of using the operator’s services, the method of payment, and the amount of payment.</p>
<p>The task is to analyze the data and predict the churn of users (to identify people who will and will not renew their contract). The work should include the following mandatory items:</p>
<ol type="1">
<li>Description of the data (with the calculation of basic statistics);</li>
<li>Research of dependencies and formulation of hypotheses;</li>
<li>Building models for predicting the outflow (with justification for the choice of a particular model) 4. based on tested hypotheses and identified relationships;</li>
<li>Comparison of the quality of the obtained models.</li>
</ol>
<p><strong>Fields description:</strong></p>
<ul class="task-list">
<li><input type="checkbox" disabled="" checked=""><code>customerID</code> - customer id</li>
<li><input type="checkbox" disabled="" checked=""><code>gender</code> - client gender (male / female)</li>
<li><input type="checkbox" disabled="" checked=""><code>SeniorCitizen</code> - is the client retired (1, 0)</li>
<li><input type="checkbox" disabled="" checked=""><code>Partner</code> - is the client married (Yes, No)</li>
<li><input type="checkbox" disabled="" checked=""><code>tenure</code> - how many months a person has been a client of the company</li>
<li><input type="checkbox" disabled="" checked=""><code>PhoneService</code> - is the telephone service connected (Yes, No)</li>
<li><input type="checkbox" disabled="" checked=""><code>MultipleLines</code> - are multiple phone lines connected (Yes, No, No phone service)</li>
<li><input type="checkbox" disabled="" checked=""><code>InternetService</code> - client’s Internet service provider (DSL, Fiber optic, No)</li>
<li><input type="checkbox" disabled="" checked=""><code>OnlineSecurity</code> - is the online security service connected (Yes, No, No internet service)</li>
<li><input type="checkbox" disabled="" checked=""><code>OnlineBackup</code> - is the online backup service activated (Yes, No, No internet service)</li>
<li><input type="checkbox" disabled="" checked=""><code>DeviceProtection</code> - does the client have equipment insurance (Yes, No, No internet service)</li>
<li><input type="checkbox" disabled="" checked=""><code>TechSupport</code> - is the technical support service connected (Yes, No, No internet service)</li>
<li><input type="checkbox" disabled="" checked=""><code>StreamingTV</code> - is the streaming TV service connected (Yes, No, No internet service)</li>
<li><input type="checkbox" disabled="" checked=""><code>StreamingMovies</code> - is the streaming cinema service activated (Yes, No, No internet service)</li>
<li><input type="checkbox" disabled="" checked=""><code>Contract</code> - type of customer contract (Month-to-month, One year, Two year)</li>
<li><input type="checkbox" disabled="" checked=""><code>PaperlessBilling</code> - whether the client uses paperless billing (Yes, No)</li>
<li><input type="checkbox" disabled="" checked=""><code>PaymentMethod</code> - payment method (Electronic check, Mailed check, Bank transfer (automatic), Credit card (automatic))</li>
<li><input type="checkbox" disabled="" checked=""><code>MonthlyCharges</code> - current monthly payment</li>
<li><input type="checkbox" disabled="" checked=""><code>TotalCharges</code> - the total amount that the client paid for the services for the entire time</li>
<li><input type="checkbox" disabled="" checked=""><code>Churn - whether</code> there was a churn (Yes or No)</li>
</ul>
</section>
<section id="reading" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="reading"><span class="header-section-number">3.3</span> Reading</h2>
<p>Thare are few methods for reading/writing csv in <code>base</code> package:</p>
<ul class="task-list">
<li><input type="checkbox" disabled="" checked=""><code>read.csv()</code>, <code>write.csv</code> - default data separator is <code>,</code>, decimal is separator <code>.</code>.</li>
<li><input type="checkbox" disabled="" checked=""><code>read.csv2()</code>, <code>write.csv2</code> - default data separator is <code>;</code>, decimal is separator <code>,</code>.</li>
</ul>
<p>Before using any new function check it usage information with <code>help(function_name)</code> or <code>?function_name</code>, example: <strong><code>?read.csv</code></strong>.</p>
<p>You can read (current data set has NA values as example, there are no NA in original datase):</p>
<div class="cell" data-execution_count="85">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"../../data/telecom_users.csv"</span>) <span class="co"># default reading</span></span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="fu">str</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   5986 obs. of  22 variables:
 $ X               : int  1869 4528 6344 6739 432 2215 5260 6001 1480 5137 ...
 $ customerID      : chr  "7010-BRBUU" "9688-YGXVR" "9286-DOJGF" "6994-KERXL" ...
 $ gender          : chr  "Male" "Female" "Female" "Male" ...
 $ SeniorCitizen   : int  0 0 1 0 0 0 0 0 0 1 ...
 $ Partner         : chr  "Yes" "No" "Yes" "No" ...
 $ Dependents      : chr  "Yes" "No" "No" "No" ...
 $ tenure          : int  72 44 38 4 2 70 33 1 39 55 ...
 $ PhoneService    : chr  "Yes" "Yes" "Yes" "Yes" ...
 $ MultipleLines   : chr  "Yes" "No" "Yes" "No" ...
 $ InternetService : chr  "No" "Fiber optic" "Fiber optic" "DSL" ...
 $ OnlineSecurity  : chr  "No internet service" "No" "No" "No" ...
 $ OnlineBackup    : chr  "No internet service" "Yes" "No" "No" ...
 $ DeviceProtection: chr  "No internet service" "Yes" "No" "No" ...
 $ TechSupport     : chr  "No internet service" "No" "No" "No" ...
 $ StreamingTV     : chr  "No internet service" "Yes" "No" "No" ...
 $ StreamingMovies : chr  "No internet service" "No" "No" "Yes" ...
 $ Contract        : chr  "Two year" "Month-to-month" "Month-to-month" "Month-to-month" ...
 $ PaperlessBilling: chr  "No" "Yes" "Yes" "Yes" ...
 $ PaymentMethod   : chr  "Credit card (automatic)" "Credit card (automatic)" "Bank transfer (automatic)" "Electronic check" ...
 $ MonthlyCharges  : chr  "24.1" "88.15" "74.95" "55.9" ...
 $ TotalCharges    : num  1735 3973 2870 238 120 ...
 $ Churn           : chr  "No" "No" "Yes" "No" ...</code></pre>
</div>
</div>
<div class="cell" data-execution_count="86">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"../../data/telecom_users.csv"</span>,</span>
<span id="cb10-2"><a href="#cb10-2"></a>                  <span class="at">sep =</span> <span class="st">","</span>, <span class="co"># comma not only possibel separator</span></span>
<span id="cb10-3"><a href="#cb10-3"></a>                  <span class="at">dec =</span> <span class="st">"."</span>, <span class="co"># decimal separator can be different</span></span>
<span id="cb10-4"><a href="#cb10-4"></a>                  <span class="at">na.strings =</span> <span class="fu">c</span>(<span class="st">""</span>, <span class="st">"NA"</span>, <span class="st">"NULL"</span>)) <span class="co"># you can define NA values</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="87">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="fu">str</span>(data) <span class="co"># chack data structure / types/ values</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   5986 obs. of  22 variables:
 $ X               : int  1869 4528 6344 6739 432 2215 5260 6001 1480 5137 ...
 $ customerID      : chr  "7010-BRBUU" "9688-YGXVR" "9286-DOJGF" "6994-KERXL" ...
 $ gender          : chr  "Male" "Female" "Female" "Male" ...
 $ SeniorCitizen   : int  0 0 1 0 0 0 0 0 0 1 ...
 $ Partner         : chr  "Yes" "No" "Yes" "No" ...
 $ Dependents      : chr  "Yes" "No" "No" "No" ...
 $ tenure          : int  72 44 38 4 2 70 33 1 39 55 ...
 $ PhoneService    : chr  "Yes" "Yes" "Yes" "Yes" ...
 $ MultipleLines   : chr  "Yes" "No" "Yes" "No" ...
 $ InternetService : chr  "No" "Fiber optic" "Fiber optic" "DSL" ...
 $ OnlineSecurity  : chr  "No internet service" "No" "No" "No" ...
 $ OnlineBackup    : chr  "No internet service" "Yes" "No" "No" ...
 $ DeviceProtection: chr  "No internet service" "Yes" "No" "No" ...
 $ TechSupport     : chr  "No internet service" "No" "No" "No" ...
 $ StreamingTV     : chr  "No internet service" "Yes" "No" "No" ...
 $ StreamingMovies : chr  "No internet service" "No" "No" "Yes" ...
 $ Contract        : chr  "Two year" "Month-to-month" "Month-to-month" "Month-to-month" ...
 $ PaperlessBilling: chr  "No" "Yes" "Yes" "Yes" ...
 $ PaymentMethod   : chr  "Credit card (automatic)" "Credit card (automatic)" "Bank transfer (automatic)" "Electronic check" ...
 $ MonthlyCharges  : num  24.1 88.2 75 55.9 53.5 ...
 $ TotalCharges    : num  1735 3973 2870 238 120 ...
 $ Churn           : chr  "No" "No" "Yes" "No" ...</code></pre>
</div>
</div>
<div class="cell" data-execution_count="88">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="fu">head</span>(data, <span class="dv">2</span>) <span class="co"># top 6 rows, use n = X, for viewing top X lines</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">

<table class="dataframe table table-sm table-striped">
<caption>A data.frame: 2 × 22</caption>
<thead>
    <tr><th></th><th scope="col">X</th><th scope="col">customerID</th><th scope="col">gender</th><th scope="col">SeniorCitizen</th><th scope="col">Partner</th><th scope="col">Dependents</th><th scope="col">tenure</th><th scope="col">PhoneService</th><th scope="col">MultipleLines</th><th scope="col">InternetService</th><th scope="col">...</th><th scope="col">DeviceProtection</th><th scope="col">TechSupport</th><th scope="col">StreamingTV</th><th scope="col">StreamingMovies</th><th scope="col">Contract</th><th scope="col">PaperlessBilling</th><th scope="col">PaymentMethod</th><th scope="col">MonthlyCharges</th><th scope="col">TotalCharges</th><th scope="col">Churn</th></tr>
    <tr><th></th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;chr&gt;</th><th scope="col">...</th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;chr&gt;</th></tr>
</thead>
<tbody>
    <tr><th scope="row">1</th><td>1869</td><td>7010-BRBUU</td><td>Male  </td><td>0</td><td>Yes</td><td>Yes</td><td>72</td><td>Yes</td><td>Yes</td><td>No         </td><td>...</td><td>No internet service</td><td>No internet service</td><td>No internet service</td><td>No internet service</td><td>Two year      </td><td>No </td><td>Credit card (automatic)</td><td>24.10</td><td>1734.65</td><td>No</td></tr>
    <tr><th scope="row">2</th><td>4528</td><td>9688-YGXVR</td><td>Female</td><td>0</td><td>No </td><td>No </td><td>44</td><td>Yes</td><td>No </td><td>Fiber optic</td><td>...</td><td>Yes                </td><td>No                 </td><td>Yes                </td><td>No                 </td><td>Month-to-month</td><td>Yes</td><td>Credit card (automatic)</td><td>88.15</td><td>3973.20</td><td>No</td></tr>
</tbody>
</table>
</div>
</div>
<div class="cell" data-execution_count="89">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="fu">is.data.frame</span>(data) <span class="co"># if data is data.frame</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
TRUE
</div>
</div>
<div class="cell" data-execution_count="90">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="fu">anyNA</span>(data) <span class="co"># if dataframe contains any NA values</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
TRUE
</div>
</div>
<div class="cell" data-execution_count="91">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="fu">lapply</span>(data, anyNA)</span>
<span id="cb16-2"><a href="#cb16-2"></a><span class="co">#lapply(, any) #check NA by 2nd dimension - columns</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<dl>
    <dt>$X</dt>
        <dd>FALSE</dd>
    <dt>$customerID</dt>
        <dd>FALSE</dd>
    <dt>$gender</dt>
        <dd>FALSE</dd>
    <dt>$SeniorCitizen</dt>
        <dd>FALSE</dd>
    <dt>$Partner</dt>
        <dd>FALSE</dd>
    <dt>$Dependents</dt>
        <dd>FALSE</dd>
    <dt>$tenure</dt>
        <dd>FALSE</dd>
    <dt>$PhoneService</dt>
        <dd>FALSE</dd>
    <dt>$MultipleLines</dt>
        <dd>FALSE</dd>
    <dt>$InternetService</dt>
        <dd>FALSE</dd>
    <dt>$OnlineSecurity</dt>
        <dd>FALSE</dd>
    <dt>$OnlineBackup</dt>
        <dd>FALSE</dd>
    <dt>$DeviceProtection</dt>
        <dd>FALSE</dd>
    <dt>$TechSupport</dt>
        <dd>FALSE</dd>
    <dt>$StreamingTV</dt>
        <dd>FALSE</dd>
    <dt>$StreamingMovies</dt>
        <dd>FALSE</dd>
    <dt>$Contract</dt>
        <dd>FALSE</dd>
    <dt>$PaperlessBilling</dt>
        <dd>FALSE</dd>
    <dt>$PaymentMethod</dt>
        <dd>FALSE</dd>
    <dt>$MonthlyCharges</dt>
        <dd>TRUE</dd>
    <dt>$TotalCharges</dt>
        <dd>TRUE</dd>
    <dt>$Churn</dt>
        <dd>FALSE</dd>
</dl>
</div>
</div>
<p>Check <code>MonthlyCharges: TRUE</code> and <code>TotalCharges: TRUE</code>. These columns has NA-values.</p>
<p>Let’s replace them with <code>mean</code>:</p>
<div class="cell" data-execution_count="92">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>data[<span class="fu">is.na</span>(data<span class="sc">$</span>TotalCharges), <span class="st">"TotalCharges"</span>] <span class="ot">&lt;-</span> <span class="fu">mean</span>(data<span class="sc">$</span>TotalCharges, <span class="at">na.rm =</span> T)</span>
<span id="cb17-2"><a href="#cb17-2"></a>data[<span class="fu">is.na</span>(data<span class="sc">$</span>MonthlyCharges), <span class="st">"MonthlyCharges"</span>] <span class="ot">&lt;-</span> <span class="fu">mean</span>(data<span class="sc">$</span>MonthlyCharges, <span class="at">na.rm =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="93">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="fu">any</span>(<span class="fu">is.na</span>(data)) <span class="co"># check for NA</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
FALSE
</div>
</div>
<p>You can write data with <code>write.csv()</code>, <code>write.csv2()</code> from <code>base</code> package.</p>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="fu">write.csv</span>(data, <span class="at">file =</span> <span class="st">"../../data/cleaned_data.csv"</span>, <span class="at">row.names =</span> F)</span>
<span id="cb19-2"><a href="#cb19-2"></a><span class="co"># by default row.names = TRUE and file will contain first column with row numbers 1,2, ..., N</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>ERROR: Error in as.data.frame.default(x[[i]], optional = TRUE): cannot coerce class '"function"' to a data.frame</code></pre>
</div>
</div>
</section>
<section id="readr-package" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="readr-package"><span class="header-section-number">3.4</span> <code>readr</code> package</h2>
<p>One more useful package is <code>readr</code>. Examples of using:</p>
<div class="cell" data-execution_count="95">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="co"># library(readr)</span></span>
<span id="cb21-2"><a href="#cb21-2"></a><span class="co"># data &lt;- read_csv(file = "../../data/telecom_users.csv")</span></span>
<span id="cb21-3"><a href="#cb21-3"></a><span class="co"># data &lt;- read_csv2(file = "../../data/telecom_users.csv")`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="набори-даних" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="набори-даних"><span class="header-section-number">3.5</span> Набори даних</h2>
<ol type="1">
<li>https://github.com/kleban/r-book-published/tree/main/datasets/telecom_users.csv</li>
<li>https://github.com/kleban/r-book-published/tree/main/datasets/telecom_sers.xlsx</li>
<li>https://github.com/kleban/r-book-published/tree/main/datasets/Default_Fin.csv</li>
<li>https://github.com/kleban/r-book-published/tree/main/datasets/employes.xml</li>
</ol>
<hr>
</section>
<section id="references" class="level2" data-number="3.6">
<h2 data-number="3.6" class="anchored" data-anchor-id="references"><span class="header-section-number">3.6</span> References</h2>
<ol type="1">
<li><a href="https://www.datacamp.com/community/tutorials/sqlite-in-r">SQLite in R. Datacamp</a></li>
<li><a href="https://www.tidyverse.org/blog/2020/05/googlesheets4-0-2-0/">Tidyverse googlesheets4 0.2.0</a> <!-- 3. [Telecom users dataset. Practice classification with a telco dataset.Kaggle](https://www.kaggle.com/radmirzosimov/telecom-users-dataset) --></li>
<li><a href="https://github.com/binance/binance-spot-api-docs/blob/master/rest-api.md#klinecandlestick-data">Binanace spot Api Docs</a></li>
<li><a href="https://www.datacamp.com/community/tutorials/r-web-scraping-rvest">Web Scraping in R: rvest Tutorial</a> by Arvid Kingl</li>
</ol>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./21-data-read.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Презентація до лекції</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./23-r-xlsx.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">MS Excel (xlsx)</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
      <div class="nav-footer-center">Copyright 2023, Юрій Клебан</div>
  </div>
</footer>



</body></html>